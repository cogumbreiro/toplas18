---
layout: default
---

<a name="lab14"><h1>Completeness</h1></a><p>The property of completeness entails the absense of false negatives,
  that is for any deadlocked state <span class="inlinecode"><span class="id" title="var">s</span></span> we can exhibit a cycle in the
  WFG of <span class="inlinecode"><span class="id" title="var">s</span></span> .
  The proof is divided into two steps.
  First, we consider totally deadlocked states <span class="inlinecode"><span class="id" title="var">s</span></span> , in which we observe that each
  task is a vertex in the WFG of <span class="inlinecode"><span class="id" title="var">s</span></span> with an outgoing edge.
  There is a cycle in any finite graph whose vertices have at least an outgoing edge,
  so totally deadlock states have a cycle.
  Second, we show the WFG of a totally deadlocked state is a subgraph
  of the WFG of the relative deadlocked state, thus we can conclude
  our proof.</p><a name="lab15"><h2>Building the WFG</h2></a><p>Let <span class="inlinecode"><span class="id" title="var">WFG_of</span></span>  <span class="inlinecode"><span class="id" title="var">s</span></span>  <span class="inlinecode"><span class="id" title="var">g</span></span> read as the finite WFG <span class="inlinecode"><span class="id" title="var">g</span></span> of state <span class="inlinecode"><span class="id" title="var">s</span></span> .
  Here, we define a finite graph as a sequence of edges, which pair
  vertices of type <span class="inlinecode"><span class="id" title="var">tid</span></span> (the set of vertices can be obtained by ranging over
  all arcs).</p>
<pre class="code"><span class="id" title="keyword">Definition</span> <a name="WFG_of"><span class="id" title="definition">WFG_of</span></a> <span class="id" title="var">s</span> <span class="id" title="var">g</span> := <br/>  <span class="id" title="keyword">forall</span> (<span class="id" title="var">e</span>:(<a class="idref" href="Brenner.Vars.html#tid"><span class="id" title="definition">tid</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">*</span></a> <a class="idref" href="Brenner.Vars.html#tid"><span class="id" title="definition">tid</span></a>)), <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">List.In</span></a> <a class="idref" href="Brenner.Completeness.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="Brenner.Completeness.html#g"><span class="id" title="variable">g</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#df1ced36fc33ce188051218bca314374"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="Brenner.ResourceDependency.html#TEdge"><span class="id" title="abbreviation">TEdge</span></a> <a class="idref" href="Brenner.Completeness.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Brenner.Completeness.html#e"><span class="id" title="variable">e</span></a>.<br/></pre>
<p>There exists a finite WFG for any state <span class="inlinecode"><span class="id" title="var">s</span></span> , the proof is outside the scope
  of this document.</p>
<pre class="code"><span class="id" title="keyword">Theorem</span> <a name="wfg_of_total"><span class="id" title="lemma">wfg_of_total</span></a>:<br/>  <span class="id" title="keyword">forall</span> <span class="id" title="var">s</span>:<a class="idref" href="Brenner.Semantics.html#state"><span class="id" title="definition">state</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">exists</span></a> <span class="id" title="var">g</span><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a> <a class="idref" href="Brenner.Completeness.html#WFG_of"><span class="id" title="definition">WFG_of</span></a> <a class="idref" href="Brenner.Completeness.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Brenner.Completeness.html#g"><span class="id" title="variable">g</span></a>.<br/></pre>
<a name="lab16"><h1>Completeness for totally deadlocked states</h1></a><p>The proof for completeness in totally deadlocked states is driven by a simple observation:
  for every vertex in the WFG of a totally deadlocked state <span class="inlinecode"><span class="id" title="var">s</span></span> there is at least one
  outgoing edge.
  Given that there is  a cycle in any finite graph in which every node has at least
  an outgoing edge, then the WFG of <span class="inlinecode"><span class="id" title="var">s</span></span> has a cycle. 
  For the rest of this sub-section, let <span class="inlinecode"><span class="id" title="var">s</span></span> be a state that is totally deadlocked,
  and let <span class="inlinecode"><span class="id" title="var">g</span></span> a finite WFG such that <span class="inlinecode"><span class="id" title="var">WFG_of</span></span>  <span class="inlinecode"><span class="id" title="var">s</span></span>  <span class="inlinecode"><span class="id" title="var">g</span></span> holds.</p>
<p>We have that if task <span class="inlinecode"><span class="id" title="var">t</span></span> is blocked on event <span class="inlinecode"><span class="id" title="var">e</span></span> , then
    there exists a task <span class="inlinecode"><span class="id" title="var">t'</span></span> such that event <span class="inlinecode"><span class="id" title="var">e</span></span> impeded_by task <span class="inlinecode"><span class="id" title="var">t'</span></span> , by unfolding the definition of <span class="inlinecode"><span class="id" title="var">TotallyDeadlocked</span></span> .</p>
<pre class="code"><span class="id" title="keyword">Lemma</span> <a name="totally_deadlocked_impeded_by"><span class="id" title="lemma">totally_deadlocked_impeded_by</span></a>:<br/>  <span class="id" title="keyword">forall</span> <span class="id" title="var">t</span> <span class="id" title="var">e</span>, <a class="idref" href="Brenner.ResourceDependency.html#WaitOn"><span class="id" title="definition">WaitOn</span></a> <a class="idref" href="Brenner.Completeness.html#TOTALLY_COMPLETE.s"><span class="id" title="variable">s</span></a> <a class="idref" href="Brenner.Completeness.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Brenner.Completeness.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">exists</span></a> <span class="id" title="var">t'</span><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a> <a class="idref" href="Brenner.ResourceDependency.html#ImpededBy"><span class="id" title="definition">ImpededBy</span></a> <a class="idref" href="Brenner.Completeness.html#TOTALLY_COMPLETE.s"><span class="id" title="variable">s</span></a> <a class="idref" href="Brenner.Completeness.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="Brenner.Completeness.html#t'"><span class="id" title="variable">t'</span></a>.<br/></pre>
<p>We also know that if <span class="inlinecode"><span class="id" title="var">t</span></span> is blocked on <span class="inlinecode"><span class="id" title="var">e</span></span> and <span class="inlinecode"><span class="id" title="var">e</span></span> impeded_by <span class="inlinecode"><span class="id" title="var">t'</span></span> ,
    then <span class="inlinecode">(<span class="id" title="var">t</span>,<span class="id" title="var">t'</span>)</span> is an edge in the WFG associated with <span class="inlinecode"><span class="id" title="var">s</span></span> , hence <span class="inlinecode">(<span class="id" title="var">t</span>,<span class="id" title="var">t'</span>)</span> is
    in graph <span class="inlinecode"><span class="id" title="var">g</span></span> .</p>
<pre class="code"><span class="id" title="keyword">Lemma</span> <a name="totally_deadlocked_blocked_odgree_1"><span class="id" title="lemma">totally_deadlocked_blocked_odgree_1</span></a>:<br/>  <span class="id" title="keyword">forall</span> <span class="id" title="var">t</span> <span class="id" title="var">e</span>, <a class="idref" href="Brenner.ResourceDependency.html#WaitOn"><span class="id" title="definition">WaitOn</span></a> <a class="idref" href="Brenner.Completeness.html#TOTALLY_COMPLETE.s"><span class="id" title="variable">s</span></a> <a class="idref" href="Brenner.Completeness.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Brenner.Completeness.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">exists</span></a> <span class="id" title="var">t'</span><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a> <span class="id" title="definition">Edge</span> <a class="idref" href="Brenner.Completeness.html#TOTALLY_COMPLETE.g"><span class="id" title="variable">g</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="Brenner.Completeness.html#t"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="Brenner.Completeness.html#t'"><span class="id" title="variable">t'</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>.<br/></pre>
<p>Therefore, it follows that if <span class="inlinecode"><span class="id" title="var">t</span></span> is blocked, then <span class="inlinecode"><span class="id" title="var">t</span></span> has
    an outgoing edge in <span class="inlinecode"><span class="id" title="var">g</span></span> .</p>
<pre class="code"><span class="id" title="keyword">Lemma</span> <a name="totally_deadlocked_blocked_odgree"><span class="id" title="lemma">totally_deadlocked_blocked_odgree</span></a>:<br/>  <span class="id" title="keyword">forall</span> <span class="id" title="var">t</span> <span class="id" title="var">e</span>, <a class="idref" href="Brenner.ResourceDependency.html#WaitOn"><span class="id" title="definition">WaitOn</span></a> <a class="idref" href="Brenner.Completeness.html#TOTALLY_COMPLETE.s"><span class="id" title="variable">s</span></a> <a class="idref" href="Brenner.Completeness.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Brenner.Completeness.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="inductive">HasOutgoing</span> <a class="idref" href="Brenner.Completeness.html#TOTALLY_COMPLETE.g"><span class="id" title="variable">g</span></a> <a class="idref" href="Brenner.Completeness.html#t"><span class="id" title="variable">t</span></a>.<br/></pre>
<p>It is easy to see that any task <span class="inlinecode"><span class="id" title="var">t</span></span> in <span class="inlinecode"><span class="id" title="var">g</span></span> is blocked.</p>
<pre class="code"><span class="id" title="keyword">Lemma</span> <a name="totally_deadlocked_vertex_blocked"><span class="id" title="lemma">totally_deadlocked_vertex_blocked</span></a>:<br/>  <span class="id" title="keyword">forall</span> <span class="id" title="var">t</span>, <span class="id" title="definition">Graph.In</span> (<span class="id" title="definition">Edge</span> <a class="idref" href="Brenner.Completeness.html#TOTALLY_COMPLETE.g"><span class="id" title="variable">g</span></a>) <a class="idref" href="Brenner.Completeness.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">exists</span></a> <span class="id" title="var">e</span><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a> <a class="idref" href="Brenner.ResourceDependency.html#WaitOn"><span class="id" title="definition">WaitOn</span></a> <a class="idref" href="Brenner.Completeness.html#TOTALLY_COMPLETE.s"><span class="id" title="variable">s</span></a> <a class="idref" href="Brenner.Completeness.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Brenner.Completeness.html#e"><span class="id" title="variable">e</span></a>.<br/></pre>
<p>Since any <span class="inlinecode"><span class="id" title="var">t</span></span> in <span class="inlinecode"><span class="id" title="var">g</span></span> is blocked, then by Lemma <span class="inlinecode"><span class="id" title="var">totally_deadlocked_blocked_odgree</span></span> any task <span class="inlinecode"><span class="id" title="var">t</span></span> in <span class="inlinecode"><span class="id" title="var">g</span></span> has an outgoing edge.</p>
<pre class="code"><span class="id" title="keyword">Lemma</span> <a name="totally_deadlocked_all_outgoing"><span class="id" title="lemma">totally_deadlocked_all_outgoing</span></a>: <span class="id" title="definition">AllOutgoing</span> <a class="idref" href="Brenner.Completeness.html#TOTALLY_COMPLETE.g"><span class="id" title="variable">g</span></a>.<br/></pre>
<p>From definition <span class="inlinecode"><span class="id" title="var">TotallyDeadlocked</span></span> there exists
    a task <span class="inlinecode"><span class="id" title="var">t</span></span> and this task is blocked,
    thus from <span class="inlinecode"><span class="id" title="var">totally_deadlocked_blocked_odgree</span></span> task <span class="inlinecode"><span class="id" title="var">t</span></span> has an outgoing edge, and therefore <span class="inlinecode"><span class="id" title="var">g</span></span> is nonempty.</p>
<pre class="code"><span class="id" title="keyword">Lemma</span> <a name="totally_deadlocked_nonempty"><span class="id" title="lemma">totally_deadlocked_nonempty</span></a>: <a class="idref" href="Brenner.Completeness.html#TOTALLY_COMPLETE.g"><span class="id" title="variable">g</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>.<br/></pre>
<p>As graph <span class="inlinecode"><span class="id" title="var">g</span></span> is nonempty and given that all vertices in <span class="inlinecode"><span class="id" title="var">g</span></span> have
    outgoing edges, then from Lemma <span class="inlinecode"><span class="id" title="var">all_pos_odegree_impl_cycle</span></span> graph <span class="inlinecode"><span class="id" title="var">g</span></span> has
    a cycle.</p>
<pre class="code"><span class="id" title="keyword">Theorem</span> <a name="totally_deadlock_has_cycle"><span class="id" title="lemma">totally_deadlock_has_cycle</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">exists</span></a> <span class="id" title="var">c</span><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a> <span class="id" title="inductive">Graph.Cycle</span> (<span class="id" title="definition">Edge</span> <a class="idref" href="Brenner.Completeness.html#TOTALLY_COMPLETE.g"><span class="id" title="variable">g</span></a>) <a class="idref" href="Brenner.Completeness.html#c"><span class="id" title="variable">c</span></a>.<br/></pre>
<a name="lab17"><h1>Completeness for deadlocked states</h1></a>
<p>Let states <span class="inlinecode"><span class="id" title="var">s</span></span> and <span class="inlinecode"><span class="id" title="var">s'</span></span> be such that <span class="inlinecode"><span class="id" title="var">s'</span></span>  <span class="inlinecode">:=</span>  <span class="inlinecode">(<span class="id" title="var">get_phasers</span></span>  <span class="inlinecode"><span class="id" title="var">s</span>,</span>  <span class="inlinecode"><span class="id" title="var">m</span>)</span> and <span class="inlinecode"><span class="id" title="var">m</span></span> and <span class="inlinecode"><span class="id" title="var">m'</span></span> are two disjoint task maps of <span class="inlinecode"><span class="id" title="var">get_tasks</span></span>  <span class="inlinecode"><span class="id" title="var">s</span></span> .
  It is easy to show that an edge in the WFG of <span class="inlinecode"><span class="id" title="var">s'</span></span> is also in the WFG of <span class="inlinecode"><span class="id" title="var">s</span></span> .
  The proof uses the standard library's properties about <span class="inlinecode"><span class="id" title="var">Partition</span></span> and by trivial unfolding of the definitions <span class="inlinecode"><span class="id" title="var">WaitOn</span></span> and <span class="inlinecode"><span class="id" title="var">ImpededBy</span></span> .</p>
<pre class="code"><span class="id" title="keyword">Lemma</span> <a name="tedge_partition"><span class="id" title="lemma">tedge_partition</span></a>:<br/>  <span class="id" title="keyword">forall</span> <span class="id" title="var">s</span> <span class="id" title="var">m</span> <span class="id" title="var">m'</span>,<br/>  <span class="id" title="keyword">let</span> <span class="id" title="var">s'</span> := <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="Brenner.Semantics.html#get_phasers"><span class="id" title="definition">get_phasers</span></a> <a class="idref" href="Brenner.Completeness.html#s"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="Brenner.Completeness.html#m"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <span class="id" title="tactic">in</span><br/>  <a class="idref" href="Brenner.Vars.html#Map_TID_Props.Partition"><span class="id" title="definition">Map_TID_Props.Partition</span></a> (<a class="idref" href="Brenner.Semantics.html#get_tasks"><span class="id" title="definition">get_tasks</span></a> <a class="idref" href="Brenner.Completeness.html#s"><span class="id" title="variable">s</span></a>) <a class="idref" href="Brenner.Completeness.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="Brenner.Completeness.html#m'"><span class="id" title="variable">m'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>  <span class="id" title="keyword">forall</span> <span class="id" title="var">e</span>,<br/>  <a class="idref" href="Brenner.ResourceDependency.html#TEdge"><span class="id" title="abbreviation">TEdge</span></a> <a class="idref" href="Brenner.Completeness.html#s'"><span class="id" title="variable">s'</span></a> <a class="idref" href="Brenner.Completeness.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Brenner.ResourceDependency.html#TEdge"><span class="id" title="abbreviation">TEdge</span></a> <a class="idref" href="Brenner.Completeness.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Brenner.Completeness.html#e"><span class="id" title="variable">e</span></a>.<br/></pre>
<p>Now, let <span class="inlinecode"><span class="id" title="var">s</span></span> be a deadlocked state,
  and <span class="inlinecode"><span class="id" title="var">g</span></span> be a finite graph such that <span class="inlinecode"><span class="id" title="var">g</span></span> is the finite WFG of <span class="inlinecode"><span class="id" title="var">s</span></span> .
  We can construct a totally deadlocked state <span class="inlinecode"><span class="id" title="var">s'</span></span> such that the finite WFG
  of <span class="inlinecode"><span class="id" title="var">s'</span></span> is a subgraph of <span class="inlinecode"><span class="id" title="var">g</span></span> .
  The proof unfolds the definition of deadlocked to obtain <span class="inlinecode"><span class="id" title="var">s'</span></span> .
  We obtain the finite WFG of <span class="inlinecode"><span class="id" title="var">s'</span></span> from Lemma <span class="inlinecode"><span class="id" title="var">wfg_of_total</span></span> , which is nonempty,
  because totally deadlocked states are nonempty.
  Finally, we get that <span class="inlinecode"><span class="id" title="var">g'</span></span> is a subgraph of <span class="inlinecode"><span class="id" title="var">g</span></span> from Lemma <span class="inlinecode"><span class="id" title="var">tedge_partition</span></span> .</p>
<pre class="code"><span class="id" title="keyword">Lemma</span> <a name="deadlocked_inv"><span class="id" title="lemma">deadlocked_inv</span></a>:<br/>  <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">exists</span></a> <span class="id" title="var">s'</span> <span class="id" title="var">g'</span><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a><br/>  <a class="idref" href="Brenner.ResourceDependency.html#TotallyDeadlocked"><span class="id" title="definition">TotallyDeadlocked</span></a> <a class="idref" href="Brenner.Completeness.html#s'"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">/\</span></a><br/>  <a class="idref" href="Brenner.Completeness.html#g'"><span class="id" title="variable">g'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">/\</span></a><br/>  <a class="idref" href="Brenner.Completeness.html#WFG_of"><span class="id" title="definition">WFG_of</span></a> <a class="idref" href="Brenner.Completeness.html#s'"><span class="id" title="variable">s'</span></a> <a class="idref" href="Brenner.Completeness.html#g'"><span class="id" title="variable">g'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">/\</span></a> <br/>  <span class="id" title="definition">Graph.subgraph</span> (<span class="id" title="definition">Edge</span> <a class="idref" href="Brenner.Completeness.html#g'"><span class="id" title="variable">g'</span></a>) (<span class="id" title="definition">Edge</span> <a class="idref" href="Brenner.Completeness.html#Bootstrap.g"><span class="id" title="variable">g</span></a>).<br/></pre>
<p>By Lemmas <span class="inlinecode"><span class="id" title="var">deadlocked_inv</span></span> and <span class="inlinecode"><span class="id" title="var">totally_deadlock_has_cycle</span></span> we get that there is a totally deadlocked state <span class="inlinecode"><span class="id" title="var">s'</span></span> that yields
    from Lemma <span class="inlinecode"><span class="id" title="var">deadlocked_inv</span></span> and state <span class="inlinecode"><span class="id" title="var">s'</span></span> has a cycle.
    But since, the finite WFG <span class="inlinecode"><span class="id" title="var">g'</span></span> of state <span class="inlinecode"><span class="id" title="var">s'</span></span> is a subgraph of
    graph <span class="inlinecode"><span class="id" title="var">g</span></span> , then the finite WFG <span class="inlinecode"><span class="id" title="var">g</span></span> of state <span class="inlinecode"><span class="id" title="var">s</span></span> also has a cycle.</p>
<pre class="code"><span class="id" title="keyword">Corollary</span> <a name="completeness"><span class="id" title="lemma">completeness</span></a>:<br/>  <span class="id" title="keyword">forall</span> (<span class="id" title="var">s</span> : <a class="idref" href="Brenner.Semantics.html#state"><span class="id" title="definition">state</span></a>),<br/>  <a class="idref" href="Brenner.ResourceDependency.html#Deadlocked"><span class="id" title="definition">Deadlocked</span></a> <a class="idref" href="Brenner.Completeness.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>  <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">exists</span></a> <span class="id" title="var">c</span><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a> <a class="idref" href="Brenner.ResourceDependency.html#TCycle"><span class="id" title="abbreviation">TCycle</span></a> <a class="idref" href="Brenner.Completeness.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Brenner.Completeness.html#c"><span class="id" title="variable">c</span></a>.<br/></pre>
