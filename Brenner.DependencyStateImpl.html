---
layout: default
---
<pre class="code"><span class="id" title="keyword">Set Implicit Arguments</span>.<br/><span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Brenner.ResourceDependency.html#"><span class="id" title="library">Brenner.ResourceDependency</span></a>.<br/><span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Brenner.DependencyState.html#"><span class="id" title="library">Brenner.DependencyState</span></a>.<br/><span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Brenner.Vars.html#"><span class="id" title="library">Brenner.Vars</span></a>.<br/><span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Brenner.Syntax.html#"><span class="id" title="library">Brenner.Syntax</span></a>.<br/><span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Brenner.PhaserMap.html#"><span class="id" title="library">Brenner.PhaserMap</span></a>.<br/><span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Brenner.Semantics.html#"><span class="id" title="library">Brenner.Semantics</span></a>.<br/><span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Arith.Bool_nat.html#"><span class="id" title="library">Coq.Arith.Bool_nat</span></a>.<br/><span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Lists.SetoidList.html#"><span class="id" title="library">Coq.Lists.SetoidList</span></a>.<br/><span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Aniceto.Project</span>.<br/><span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Aniceto.Map</span>.<br/><span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Aniceto.Set</span>.<br/><span class="id" title="keyword">Module</span> <a name="I"><span class="id" title="module">I</span></a> := <span class="id" title="module">Project</span> <a class="idref" href="Brenner.ResourceDependency.html#Map_EVT"><span class="id" title="module">Map_EVT</span></a> <a class="idref" href="Brenner.Vars.html#Set_TID"><span class="id" title="module">Set_TID</span></a>.<br/><span class="id" title="keyword">Module</span> <a name="W"><span class="id" title="module">W</span></a> := <span class="id" title="module">Project</span> <a class="idref" href="Brenner.Vars.html#Map_TID"><span class="id" title="module">Map_TID</span></a> <a class="idref" href="Brenner.ResourceDependency.html#Set_EVT"><span class="id" title="module">Set_EVT</span></a>.<br/></pre>
<p>We build the phaser map of waiting tasks to be constituted by all
   blocked tasks in state <span class="inlinecode"><span class="id" title="var">s</span></span> .</p>
<pre class="code"><span class="id" title="keyword">Definition</span> <a name="W_of"><span class="id" title="definition">W_of</span></a> (<span class="id" title="var">s</span>:<a class="idref" href="Brenner.Semantics.html#state"><span class="id" title="definition">state</span></a>) (<span class="id" title="var">w</span>:<a class="idref" href="Brenner.DependencyState.html#t_wait_on"><span class="id" title="definition">t_wait_on</span></a>) := <span class="id" title="keyword">forall</span> <span class="id" title="var">t</span> <span class="id" title="var">e</span>, <a class="idref" href="Brenner.DependencyState.html#WDep"><span class="id" title="definition">WDep</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#w"><span class="id" title="variable">w</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#df1ced36fc33ce188051218bca314374"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="Brenner.ResourceDependency.html#WaitOn"><span class="id" title="definition">WaitOn</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#e"><span class="id" title="variable">e</span></a>.<br/></pre>
<p>An event <span class="inlinecode"><span class="id" title="var">e</span></span> impeded_by a task <span class="inlinecode"><span class="id" title="var">e</span></span> if task <span class="inlinecode"><span class="id" title="var">t</span></span> is registered in a
   preceeding resource; the impeding event must be the target of
   a blocked task.</p><p>The map of impeded_by holds all event that are blocking a task.</p>
<pre class="code"><span class="id" title="keyword">Definition</span> <a name="I_of"><span class="id" title="definition">I_of</span></a> (<span class="id" title="var">s</span>:<a class="idref" href="Brenner.Semantics.html#state"><span class="id" title="definition">state</span></a>) (<span class="id" title="var">i</span>:<a class="idref" href="Brenner.DependencyState.html#t_impeded_by"><span class="id" title="definition">t_impeded_by</span></a>) := <span class="id" title="keyword">forall</span> <span class="id" title="var">t</span> <span class="id" title="var">e</span>, <a class="idref" href="Brenner.DependencyState.html#IDep"><span class="id" title="definition">IDep</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#df1ced36fc33ce188051218bca314374"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="Brenner.ResourceDependency.html#ImpededBy"><span class="id" title="definition">ImpededBy</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#t"><span class="id" title="variable">t</span></a>.<br/><span class="id" title="keyword">Definition</span> <a name="Deps_of"><span class="id" title="definition">Deps_of</span></a> (<span class="id" title="var">s</span>:<a class="idref" href="Brenner.Semantics.html#state"><span class="id" title="definition">state</span></a>) (<span class="id" title="var">d</span>:<a class="idref" href="Brenner.DependencyState.html#dependencies"><span class="id" title="definition">dependencies</span></a>) := <a class="idref" href="Brenner.DependencyStateImpl.html#W_of"><span class="id" title="definition">W_of</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#s"><span class="id" title="variable">s</span></a> (<a class="idref" href="Brenner.DependencyState.html#get_wait_on"><span class="id" title="definition">get_wait_on</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#d"><span class="id" title="variable">d</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">/\</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#I_of"><span class="id" title="definition">I_of</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#s"><span class="id" title="variable">s</span></a> (<a class="idref" href="Brenner.DependencyState.html#get_impeded_by"><span class="id" title="definition">get_impeded_by</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#d"><span class="id" title="variable">d</span></a>).<br/><span class="id" title="keyword">Section</span> <a name="Basic"><span class="id" title="section">Basic</span></a>.<br/>  <span class="id" title="keyword">Variable</span> <a name="Basic.d"><span class="id" title="variable">d</span></a>:<a class="idref" href="Brenner.DependencyState.html#dependencies"><span class="id" title="definition">dependencies</span></a>.<br/>  <span class="id" title="keyword">Variable</span> <a name="Basic.s"><span class="id" title="variable">s</span></a>:<a class="idref" href="Brenner.Semantics.html#state"><span class="id" title="definition">state</span></a>.<br/>  <span class="id" title="keyword">Variable</span> <a name="Basic.d_of_s"><span class="id" title="variable">d_of_s</span></a>: <a class="idref" href="Brenner.DependencyStateImpl.html#Deps_of"><span class="id" title="definition">Deps_of</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#Basic.s"><span class="id" title="variable">s</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#Basic.d"><span class="id" title="variable">d</span></a>.<br/><span class="id" title="keyword">Let</span> <a name="Basic.wedge_to_wait_on"><span class="id" title="variable">wedge_to_wait_on</span></a>:<br/>  <span class="id" title="keyword">forall</span> <span class="id" title="var">r</span> <span class="id" title="var">t</span>,<br/>  <a class="idref" href="Brenner.DependencyState.html#WEdge"><span class="id" title="definition">WEdge</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#Basic.d"><span class="id" title="variable">d</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>  <a class="idref" href="Brenner.ResourceDependency.html#WaitOn"><span class="id" title="definition">WaitOn</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#Basic.s"><span class="id" title="variable">s</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#r"><span class="id" title="variable">r</span></a>.<br/><span class="id" title="keyword">Let</span> <a name="Basic.wait_on_to_wedge"><span class="id" title="variable">wait_on_to_wedge</span></a>:<br/>  <span class="id" title="keyword">forall</span> <span class="id" title="var">r</span> <span class="id" title="var">t</span>,<br/>  <a class="idref" href="Brenner.ResourceDependency.html#WaitOn"><span class="id" title="definition">WaitOn</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#Basic.s"><span class="id" title="variable">s</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>  <a class="idref" href="Brenner.DependencyState.html#WEdge"><span class="id" title="definition">WEdge</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#Basic.d"><span class="id" title="variable">d</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#r"><span class="id" title="variable">r</span></a>.<br/></pre>
<p>If we have that <span class="inlinecode"><span class="id" title="var">d</span></span> are the state-depencies of
    a state <span class="inlinecode"><span class="id" title="var">s</span></span> , then a W-edge is equivalent to a wait_on-for
    relation.</p>
<pre class="code"><span class="id" title="keyword">Lemma</span> <a name="wedge_eq_wait_on"><span class="id" title="lemma">wedge_eq_wait_on</span></a>:<br/>  <span class="id" title="keyword">forall</span> <span class="id" title="var">r</span> <span class="id" title="var">t</span>,<br/>  <a class="idref" href="Brenner.DependencyState.html#WEdge"><span class="id" title="definition">WEdge</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#Basic.d"><span class="id" title="variable">d</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#df1ced36fc33ce188051218bca314374"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="Brenner.ResourceDependency.html#WaitOn"><span class="id" title="definition">WaitOn</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#Basic.s"><span class="id" title="variable">s</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#r"><span class="id" title="variable">r</span></a>.<br/></pre>
<p>Similarly, an i-edge is equivalent to an impeded_by relation.</p>
<pre class="code"><span class="id" title="keyword">Lemma</span> <a name="iedge_eq_impeded_by"><span class="id" title="lemma">iedge_eq_impeded_by</span></a>:<br/>  <span class="id" title="keyword">forall</span> <span class="id" title="var">r</span> <span class="id" title="var">t</span>,<br/>  <a class="idref" href="Brenner.DependencyState.html#IEdge"><span class="id" title="definition">IEdge</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#Basic.d"><span class="id" title="variable">d</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#df1ced36fc33ce188051218bca314374"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="Brenner.ResourceDependency.html#ImpededBy"><span class="id" title="definition">ImpededBy</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#Basic.s"><span class="id" title="variable">s</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#t"><span class="id" title="variable">t</span></a>.<br/><span class="id" title="keyword">End</span> <a class="idref" href="Brenner.DependencyStateImpl.html#Basic"><span class="id" title="section">Basic</span></a>.<br/><span class="id" title="keyword">Section</span> <a name="Props"><span class="id" title="section">Props</span></a>.<br/><span class="id" title="keyword">Definition</span> <a name="blocked"><span class="id" title="definition">blocked</span></a> (<span class="id" title="var">s</span>:<a class="idref" href="Brenner.Semantics.html#state"><span class="id" title="definition">state</span></a>) (<span class="id" title="var">e</span>:(<a class="idref" href="Brenner.Vars.html#tid"><span class="id" title="definition">tid</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">*</span></a><a class="idref" href="Brenner.Syntax.html#prog"><span class="id" title="inductive">prog</span></a>)) : <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="Brenner.ResourceDependency.html#event"><span class="id" title="definition">event</span></a> :=<br/>  <span class="id" title="keyword">let</span> (<span class="id" title="var">t</span>, <span class="id" title="var">prg</span>) := <a class="idref" href="Brenner.DependencyStateImpl.html#e"><span class="id" title="variable">e</span></a> <span class="id" title="tactic">in</span><br/>  <span class="id" title="keyword">match</span> <a class="idref" href="Brenner.DependencyStateImpl.html#prg"><span class="id" title="variable">prg</span></a> <span class="id" title="keyword">with</span><br/>    | <a class="idref" href="Brenner.Syntax.html#pcons"><span class="id" title="constructor">pcons</span></a> <span class="id" title="var">i</span> <span class="id" title="var">_</span> =&gt;<br/>      <br/>      <span class="id" title="keyword">match</span> <span class="id" title="var">i</span> <span class="id" title="keyword">with</span><br/>        | <a class="idref" href="Brenner.Syntax.html#await"><span class="id" title="constructor">await</span></a> <span class="id" title="var">p</span> <span class="id" title="var">n</span> =&gt;<br/>          <br/>          <span class="id" title="keyword">match</span> <a class="idref" href="Brenner.Vars.html#Map_PHID.find"><span class="id" title="definition">Map_PHID.find</span></a> <span class="id" title="var">p</span> (<a class="idref" href="Brenner.Semantics.html#get_phasers"><span class="id" title="definition">get_phasers</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#s"><span class="id" title="variable">s</span></a>) <span class="id" title="keyword">with</span><br/>            | <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><span class="id" title="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">n</span><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a><br/>            | <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>          <span class="id" title="keyword">end</span><br/>        | <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>      <span class="id" title="keyword">end</span><br/>    | <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>  <span class="id" title="keyword">end</span>.<br/></pre>
<a name="lab11"><h1>Generates a TEG edge from task to event.</h1></a>
<pre class="code"><span class="id" title="keyword">Definition</span> <a name="wait_on"><span class="id" title="definition">wait_on</span></a> <span class="id" title="var">s</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="Brenner.Vars.html#tid"><span class="id" title="definition">tid</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">*</span></a> <a class="idref" href="Brenner.ResourceDependency.html#event"><span class="id" title="definition">event</span></a>) :=<br/>  <span class="id" title="definition">List.omap</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">e</span> =&gt;<br/>    <span class="id" title="keyword">match</span> <a class="idref" href="Brenner.DependencyStateImpl.html#blocked"><span class="id" title="definition">blocked</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#e"><span class="id" title="variable">e</span></a> <span class="id" title="keyword">with</span><br/>    | <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">r</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#e"><span class="id" title="variable">e</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a><span class="id" title="var">r</span><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a><br/>    | <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>    <span class="id" title="keyword">end</span><br/>  ) (<a class="idref" href="Brenner.Vars.html#Map_TID.elements"><span class="id" title="definition">Map_TID.elements</span></a> (<a class="idref" href="Brenner.Semantics.html#get_tasks"><span class="id" title="definition">get_tasks</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#s"><span class="id" title="variable">s</span></a>)).<br/><span class="id" title="keyword">Let</span> <a name="Props.blocked_inv_1"><span class="id" title="variable">blocked_inv_1</span></a>:<br/>  <span class="id" title="keyword">forall</span> <span class="id" title="var">s</span> <span class="id" title="var">t</span> <span class="id" title="var">p</span> <span class="id" title="var">n</span> <span class="id" title="var">r</span> <span class="id" title="var">prg</span>,<br/>  <a class="idref" href="Brenner.DependencyStateImpl.html#blocked"><span class="id" title="definition">blocked</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="Brenner.DependencyStateImpl.html#t"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="Brenner.Syntax.html#pcons"><span class="id" title="constructor">pcons</span></a> (<a class="idref" href="Brenner.Syntax.html#await"><span class="id" title="constructor">await</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#n"><span class="id" title="variable">n</span></a>) <a class="idref" href="Brenner.DependencyStateImpl.html#prg"><span class="id" title="variable">prg</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a><br/>       <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>  <a class="idref" href="Brenner.DependencyStateImpl.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="Brenner.DependencyStateImpl.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#n"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>.<br/><span class="id" title="keyword">Let</span> <a name="Props.blocked_inv_2"><span class="id" title="variable">blocked_inv_2</span></a>:<br/>  <span class="id" title="keyword">forall</span> <span class="id" title="var">s</span> <span class="id" title="var">t</span> <span class="id" title="var">p</span> <span class="id" title="var">n</span> <span class="id" title="var">prg</span>,<br/>  <a class="idref" href="Brenner.DependencyStateImpl.html#blocked"><span class="id" title="definition">blocked</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="Brenner.DependencyStateImpl.html#t"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="Brenner.Syntax.html#pcons"><span class="id" title="constructor">pcons</span></a> (<a class="idref" href="Brenner.Syntax.html#await"><span class="id" title="constructor">await</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#n"><span class="id" title="variable">n</span></a>) <a class="idref" href="Brenner.DependencyStateImpl.html#prg"><span class="id" title="variable">prg</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>  <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">~</span></a> <a class="idref" href="Brenner.Vars.html#Map_PHID.In"><span class="id" title="definition">Map_PHID.In</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#p"><span class="id" title="variable">p</span></a> (<a class="idref" href="Brenner.Semantics.html#get_phasers"><span class="id" title="definition">get_phasers</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#s"><span class="id" title="variable">s</span></a>).<br/><span class="id" title="keyword">Let</span> <a name="Props.blocked_inv_3"><span class="id" title="variable">blocked_inv_3</span></a>:<br/>  <span class="id" title="keyword">forall</span> <span class="id" title="var">s</span> <span class="id" title="var">t</span> <span class="id" title="var">r</span> <span class="id" title="var">prg</span> <span class="id" title="var">r'</span>,<br/>  <a class="idref" href="Brenner.DependencyStateImpl.html#blocked"><span class="id" title="definition">blocked</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="Brenner.DependencyStateImpl.html#t"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="Brenner.Syntax.html#pcons"><span class="id" title="constructor">pcons</span></a> (<a class="idref" href="Brenner.Syntax.html#await"><span class="id" title="constructor">await</span></a> (<a class="idref" href="Brenner.ResourceDependency.html#get_phaser"><span class="id" title="definition">get_phaser</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#r"><span class="id" title="variable">r</span></a>) (<a class="idref" href="Brenner.ResourceDependency.html#get_phase"><span class="id" title="definition">get_phase</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#r"><span class="id" title="variable">r</span></a>)) <a class="idref" href="Brenner.DependencyStateImpl.html#prg"><span class="id" title="variable">prg</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a><br/>       <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#r'"><span class="id" title="variable">r'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>  <a class="idref" href="Brenner.DependencyStateImpl.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#r'"><span class="id" title="variable">r'</span></a>.<br/><span class="id" title="keyword">Let</span> <a name="Props.blocked_spec"><span class="id" title="variable">blocked_spec</span></a>:<br/>  <span class="id" title="keyword">forall</span> <span class="id" title="var">s</span> <span class="id" title="var">t</span> <span class="id" title="var">prg</span> <span class="id" title="var">r</span>,<br/>  <a class="idref" href="Brenner.DependencyStateImpl.html#blocked"><span class="id" title="definition">blocked</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="Brenner.DependencyStateImpl.html#t"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#prg"><span class="id" title="variable">prg</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#df1ced36fc33ce188051218bca314374"><span class="id" title="notation">&lt;-&gt;</span></a><br/>  <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">exists</span></a> <span class="id" title="var">prg'</span><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#prg"><span class="id" title="variable">prg</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">(</span></a><a class="idref" href="Brenner.Syntax.html#pcons"><span class="id" title="constructor">pcons</span></a> (<a class="idref" href="Brenner.Syntax.html#await"><span class="id" title="constructor">await</span></a> (<a class="idref" href="Brenner.ResourceDependency.html#get_phaser"><span class="id" title="definition">get_phaser</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#r"><span class="id" title="variable">r</span></a>) (<a class="idref" href="Brenner.ResourceDependency.html#get_phase"><span class="id" title="definition">get_phase</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#r"><span class="id" title="variable">r</span></a>)) <a class="idref" href="Brenner.DependencyStateImpl.html#prg'"><span class="id" title="variable">prg'</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">)</span></a><br/>  <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">/\</span></a> <a class="idref" href="Brenner.Vars.html#Map_PHID.In"><span class="id" title="definition">Map_PHID.In</span></a> (<span class="id" title="var">elt</span>:=<a class="idref" href="Brenner.Phaser.html#phaser"><span class="id" title="definition">Phaser.phaser</span></a>) (<a class="idref" href="Brenner.ResourceDependency.html#get_phaser"><span class="id" title="definition">get_phaser</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#r"><span class="id" title="variable">r</span></a>) (<a class="idref" href="Brenner.Semantics.html#get_phasers"><span class="id" title="definition">get_phasers</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#s"><span class="id" title="variable">s</span></a>).<br/><span class="id" title="keyword">Let</span> <a name="Props.wait_on_def"><span class="id" title="variable">wait_on_def</span></a>:<br/>  <span class="id" title="keyword">forall</span> <span class="id" title="var">p</span> <span class="id" title="var">e</span> <span class="id" title="var">s</span> <span class="id" title="var">t</span>,<br/>  <a class="idref" href="Brenner.Vars.html#Map_PHID.In"><span class="id" title="definition">Map_PHID.In</span></a> (<a class="idref" href="Brenner.ResourceDependency.html#get_phaser"><span class="id" title="definition">get_phaser</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#e"><span class="id" title="variable">e</span></a>) (<a class="idref" href="Brenner.Semantics.html#get_phasers"><span class="id" title="definition">get_phasers</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#s"><span class="id" title="variable">s</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>  <a class="idref" href="Brenner.Vars.html#Map_TID.MapsTo"><span class="id" title="definition">Map_TID.MapsTo</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#t"><span class="id" title="variable">t</span></a> (<a class="idref" href="Brenner.Syntax.html#pcons"><span class="id" title="constructor">pcons</span></a> (<a class="idref" href="Brenner.Syntax.html#await"><span class="id" title="constructor">await</span></a> (<a class="idref" href="Brenner.ResourceDependency.html#get_phaser"><span class="id" title="definition">get_phaser</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#e"><span class="id" title="variable">e</span></a>) (<a class="idref" href="Brenner.ResourceDependency.html#get_phase"><span class="id" title="definition">get_phase</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#e"><span class="id" title="variable">e</span></a>)) <a class="idref" href="Brenner.DependencyStateImpl.html#p"><span class="id" title="variable">p</span></a>) (<a class="idref" href="Brenner.Semantics.html#get_tasks"><span class="id" title="definition">get_tasks</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#s"><span class="id" title="variable">s</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>  <a class="idref" href="Brenner.ResourceDependency.html#WaitOn"><span class="id" title="definition">WaitOn</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#e"><span class="id" title="variable">e</span></a>.<br/><span class="id" title="keyword">Let</span> <a name="Props.wait_on_1"><span class="id" title="variable">wait_on_1</span></a>:<br/>  <span class="id" title="keyword">forall</span> <span class="id" title="var">t</span> <span class="id" title="var">s</span> <span class="id" title="var">e</span>,<br/>  <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="Brenner.DependencyStateImpl.html#t"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#e"><span class="id" title="variable">e</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> (<a class="idref" href="Brenner.DependencyStateImpl.html#wait_on"><span class="id" title="definition">wait_on</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#s"><span class="id" title="variable">s</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>  <a class="idref" href="Brenner.ResourceDependency.html#WaitOn"><span class="id" title="definition">WaitOn</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#e"><span class="id" title="variable">e</span></a>.<br/><span class="id" title="keyword">Let</span> <a name="Props.wait_on_2"><span class="id" title="variable">wait_on_2</span></a>:<br/>  <span class="id" title="keyword">forall</span> <span class="id" title="var">t</span> <span class="id" title="var">s</span> <span class="id" title="var">e</span>,<br/>  <a class="idref" href="Brenner.ResourceDependency.html#WaitOn"><span class="id" title="definition">WaitOn</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>  <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="Brenner.DependencyStateImpl.html#t"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#e"><span class="id" title="variable">e</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> (<a class="idref" href="Brenner.DependencyStateImpl.html#wait_on"><span class="id" title="definition">wait_on</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#s"><span class="id" title="variable">s</span></a>).<br/><span class="id" title="keyword">Let</span> <a name="Props.wait_on_spec"><span class="id" title="variable">wait_on_spec</span></a>:<br/>  <span class="id" title="keyword">forall</span> <span class="id" title="var">t</span> <span class="id" title="var">s</span> <span class="id" title="var">e</span>,<br/>  <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="Brenner.DependencyStateImpl.html#t"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#e"><span class="id" title="variable">e</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> (<a class="idref" href="Brenner.DependencyStateImpl.html#wait_on"><span class="id" title="definition">wait_on</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#s"><span class="id" title="variable">s</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#df1ced36fc33ce188051218bca314374"><span class="id" title="notation">&lt;-&gt;</span></a><br/>  <a class="idref" href="Brenner.ResourceDependency.html#WaitOn"><span class="id" title="definition">WaitOn</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#e"><span class="id" title="variable">e</span></a>.<br/><span class="id" title="keyword">Definition</span> <a name="registered"><span class="id" title="definition">registered</span></a> <span class="id" title="var">s</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="Brenner.Vars.html#tid"><span class="id" title="definition">tid</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">*</span></a><a class="idref" href="Brenner.ResourceDependency.html#event"><span class="id" title="definition">event</span></a>) :=<br/>  <span class="id" title="keyword">let</span> <span class="id" title="var">on_registered</span> (<span class="id" title="var">p</span>:<a class="idref" href="Brenner.Vars.html#phid"><span class="id" title="definition">phid</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">*</span></a><a class="idref" href="Brenner.Phaser.html#phaser"><span class="id" title="definition">Phaser.phaser</span></a>) :=<br/>    <span class="id" title="keyword">let</span> (<span class="id" title="var">p</span>, <span class="id" title="var">ph</span>) := <a class="idref" href="Brenner.DependencyStateImpl.html#p"><span class="id" title="variable">p</span></a> <span class="id" title="tactic">in</span><br/>    <span class="id" title="keyword">let</span> <span class="id" title="var">handle</span> (<span class="id" title="var">e</span>:<a class="idref" href="Brenner.Vars.html#tid"><span class="id" title="definition">tid</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">*</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) :=<br/>      <span class="id" title="keyword">let</span> (<span class="id" title="var">t</span>, <span class="id" title="var">n</span>) := <a class="idref" href="Brenner.DependencyStateImpl.html#e"><span class="id" title="variable">e</span></a> <span class="id" title="tactic">in</span><br/>      <span class="id" title="keyword">match</span> <a class="idref" href="Brenner.Vars.html#Map_TID.find"><span class="id" title="definition">Map_TID.find</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#t"><span class="id" title="variable">t</span></a> (<a class="idref" href="Brenner.Semantics.html#get_tasks"><span class="id" title="definition">get_tasks</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#s"><span class="id" title="variable">s</span></a>) <span class="id" title="keyword">with</span><br/>      | <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="Brenner.DependencyStateImpl.html#t"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="Brenner.DependencyStateImpl.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#n"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">))</span></a><br/>      | <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>      <span class="id" title="keyword">end</span><br/>    <span class="id" title="tactic">in</span><br/>    <span class="id" title="definition">List.omap</span> <a class="idref" href="Brenner.DependencyStateImpl.html#handle"><span class="id" title="variable">handle</span></a> (<a class="idref" href="Brenner.Vars.html#Map_TID.elements"><span class="id" title="definition">Map_TID.elements</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#ph"><span class="id" title="variable">ph</span></a>)<br/>  <span class="id" title="tactic">in</span><br/>  <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Lists.List.html#flat_map"><span class="id" title="definition">flat_map</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#on_registered"><span class="id" title="variable">on_registered</span></a> (<a class="idref" href="Brenner.Vars.html#Map_PHID.elements"><span class="id" title="definition">Map_PHID.elements</span></a> (<a class="idref" href="Brenner.Semantics.html#get_phasers"><span class="id" title="definition">get_phasers</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#s"><span class="id" title="variable">s</span></a>)).<br/><span class="id" title="keyword">Let</span> <a name="Props.registered_1"><span class="id" title="variable">registered_1</span></a>:<br/>  <span class="id" title="keyword">forall</span> <span class="id" title="var">t</span> <span class="id" title="var">e</span> <span class="id" title="var">s</span>,<br/>  <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="Brenner.DependencyStateImpl.html#t"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#e"><span class="id" title="variable">e</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> (<a class="idref" href="Brenner.DependencyStateImpl.html#registered"><span class="id" title="definition">registered</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#s"><span class="id" title="variable">s</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>  <a class="idref" href="Brenner.ResourceDependency.html#Registered"><span class="id" title="definition">Registered</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#e"><span class="id" title="variable">e</span></a>.<br/><span class="id" title="keyword">Let</span> <a name="Props.registered_2"><span class="id" title="variable">registered_2</span></a>:<br/>  <span class="id" title="keyword">forall</span> <span class="id" title="var">t</span> <span class="id" title="var">e</span> <span class="id" title="var">s</span>,<br/>  <a class="idref" href="Brenner.ResourceDependency.html#Registered"><span class="id" title="definition">Registered</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>  <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="Brenner.DependencyStateImpl.html#t"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#e"><span class="id" title="variable">e</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> (<a class="idref" href="Brenner.DependencyStateImpl.html#registered"><span class="id" title="definition">registered</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#s"><span class="id" title="variable">s</span></a>).<br/><span class="id" title="keyword">Let</span> <a name="Props.registered_spec"><span class="id" title="variable">registered_spec</span></a>:<br/>  <span class="id" title="keyword">forall</span> <span class="id" title="var">t</span> <span class="id" title="var">e</span> <span class="id" title="var">s</span>,<br/>  <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="Brenner.DependencyStateImpl.html#t"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#e"><span class="id" title="variable">e</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> (<a class="idref" href="Brenner.DependencyStateImpl.html#registered"><span class="id" title="definition">registered</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#s"><span class="id" title="variable">s</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#df1ced36fc33ce188051218bca314374"><span class="id" title="notation">&lt;-&gt;</span></a><br/>  <a class="idref" href="Brenner.ResourceDependency.html#Registered"><span class="id" title="definition">Registered</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#e"><span class="id" title="variable">e</span></a>.<br/><span class="id" title="keyword">Let</span> <a name="Props.tid_eq_subst"><span class="id" title="variable">tid_eq_subst</span></a>:<br/>  <span class="id" title="keyword">forall</span> (<span class="id" title="var">e1</span> <span class="id" title="var">e2</span>:<a class="idref" href="Brenner.Vars.html#tid"><span class="id" title="definition">tid</span></a>), <a class="idref" href="Brenner.Vars.html#Map_TID.E.eq"><span class="id" title="axiom">Map_TID.E.eq</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#e1"><span class="id" title="variable">e1</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#e2"><span class="id" title="variable">e2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#df1ced36fc33ce188051218bca314374"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#e1"><span class="id" title="variable">e1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#e2"><span class="id" title="variable">e2</span></a>.<br/><span class="id" title="keyword">Let</span> <a name="Props.evt_eq_subst"><span class="id" title="variable">evt_eq_subst</span></a>:<br/>  <span class="id" title="keyword">forall</span> (<span class="id" title="var">e1</span> <span class="id" title="var">e2</span>:<a class="idref" href="Brenner.ResourceDependency.html#event"><span class="id" title="definition">event</span></a>), <a class="idref" href="Brenner.ResourceDependency.html#Map_EVT.E.eq"><span class="id" title="axiom">Map_EVT.E.eq</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#e1"><span class="id" title="variable">e1</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#e2"><span class="id" title="variable">e2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#df1ced36fc33ce188051218bca314374"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#e1"><span class="id" title="variable">e1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#e2"><span class="id" title="variable">e2</span></a>.<br/><span class="id" title="keyword">Let</span> <a name="Props.tid_eq_helper"><span class="id" title="variable">tid_eq_helper</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">k1</span> <span class="id" title="var">k2</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>, <a class="idref" href="Brenner.DependencyStateImpl.html#k1"><span class="id" title="variable">k1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#k2"><span class="id" title="variable">k2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#k1"><span class="id" title="variable">k1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#k2"><span class="id" title="variable">k2</span></a>.<br/><span class="id" title="keyword">Definition</span> <a name="to_wait_on"><span class="id" title="definition">to_wait_on</span></a> <span class="id" title="var">s</span> := <a class="idref" href="Brenner.DependencyStateImpl.html#unproject"><span class="id" title="definition">W.unproject</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#Props.tid_eq_helper"><span class="id" title="variable">tid_eq_helper</span></a> (<a class="idref" href="Brenner.DependencyStateImpl.html#wait_on"><span class="id" title="definition">wait_on</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#s"><span class="id" title="variable">s</span></a>).<br/><span class="id" title="keyword">Let</span> <a name="Props.wait_on_total"><span class="id" title="variable">wait_on_total</span></a>:<br/>  <span class="id" title="keyword">forall</span> (<span class="id" title="var">s</span>:<a class="idref" href="Brenner.Semantics.html#state"><span class="id" title="definition">state</span></a>),<br/>  <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">(</span></a><span class="id" title="var">w</span>:<a class="idref" href="Brenner.DependencyState.html#t_wait_on"><span class="id" title="definition">t_wait_on</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">),</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#W_of"><span class="id" title="definition">W_of</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#w"><span class="id" title="variable">w</span></a>.<br/><span class="id" title="keyword">Let</span> <a name="Props.prec_dec"><span class="id" title="variable">prec_dec</span></a> <span class="id" title="var">e</span> <span class="id" title="var">e'</span> :<br/>  <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">{</span></a> <a class="idref" href="Brenner.ResourceDependency.html#prec"><span class="id" title="definition">prec</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#e'"><span class="id" title="variable">e'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">}</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">{</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">~</span></a> <a class="idref" href="Brenner.ResourceDependency.html#prec"><span class="id" title="definition">prec</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#e'"><span class="id" title="variable">e'</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">}</span></a>.<br/></pre>
<a name="lab12"><h1>Build a TEG from the wait-on relation and registered-on relations.</h1></a>
<pre class="code"><span class="id" title="keyword">Definition</span> <a name="teg"><span class="id" title="definition">teg</span></a> (<span class="id" title="var">ws</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="Brenner.Vars.html#tid"><span class="id" title="definition">tid</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">*</span></a><a class="idref" href="Brenner.ResourceDependency.html#event"><span class="id" title="definition">event</span></a>)) (<span class="id" title="var">rs</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="Brenner.Vars.html#tid"><span class="id" title="definition">tid</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">*</span></a><a class="idref" href="Brenner.ResourceDependency.html#event"><span class="id" title="definition">event</span></a>)) :=<br/>  <span class="id" title="keyword">let</span> <span class="id" title="var">es</span> := <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">p</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#p"><span class="id" title="variable">p</span></a>) <a class="idref" href="Brenner.DependencyStateImpl.html#ws"><span class="id" title="variable">ws</span></a> <span class="id" title="tactic">in</span><br/>  <span class="id" title="keyword">let</span> <span class="id" title="var">handle_entry</span> (<span class="id" title="var">e</span>:<a class="idref" href="Brenner.ResourceDependency.html#event"><span class="id" title="definition">event</span></a>) (<span class="id" title="var">p</span>:<a class="idref" href="Brenner.Vars.html#tid"><span class="id" title="definition">tid</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">*</span></a><a class="idref" href="Brenner.ResourceDependency.html#event"><span class="id" title="definition">event</span></a>) :=<br/>    <span class="id" title="keyword">let</span> (<span class="id" title="var">t</span>, <span class="id" title="var">e'</span>) := <a class="idref" href="Brenner.DependencyStateImpl.html#p"><span class="id" title="variable">p</span></a> <span class="id" title="tactic">in</span><br/>    <span class="id" title="keyword">if</span> <a class="idref" href="Brenner.DependencyStateImpl.html#Props.prec_dec"><span class="id" title="variable">prec_dec</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#e'"><span class="id" title="variable">e'</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#e"><span class="id" title="variable">e</span></a> <span class="id" title="keyword">then</span> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="Brenner.DependencyStateImpl.html#e"><span class="id" title="variable">e</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#t"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a><br/>    <span class="id" title="keyword">else</span> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>  <span class="id" title="tactic">in</span><br/>  <span class="id" title="keyword">let</span> <span class="id" title="var">handle</span> <span class="id" title="var">e</span> :=<br/>    <span class="id" title="definition">List.omap</span> (<a class="idref" href="Brenner.DependencyStateImpl.html#handle_entry"><span class="id" title="variable">handle_entry</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#e"><span class="id" title="variable">e</span></a>) <a class="idref" href="Brenner.DependencyStateImpl.html#rs"><span class="id" title="variable">rs</span></a><br/>  <span class="id" title="tactic">in</span><br/>  <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="Brenner.DependencyStateImpl.html#ws"><span class="id" title="variable">ws</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Lists.List.html#flat_map"><span class="id" title="definition">flat_map</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#handle"><span class="id" title="variable">handle</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#es"><span class="id" title="variable">es</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>.<br/></pre>
<a name="lab13"><h1>Returns the impeded-by relation from events to tasks.</h1></a>
<pre class="code"><span class="id" title="keyword">Definition</span> <a name="impeded_by"><span class="id" title="definition">impeded_by</span></a> <span class="id" title="var">s</span> :=<br/>  <span class="id" title="keyword">let</span> <span class="id" title="var">es</span> := <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">p</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#p"><span class="id" title="variable">p</span></a>) (<a class="idref" href="Brenner.DependencyStateImpl.html#wait_on"><span class="id" title="definition">wait_on</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#s"><span class="id" title="variable">s</span></a>) <span class="id" title="tactic">in</span><br/>  <span class="id" title="keyword">let</span> <span class="id" title="var">handle_entry</span> (<span class="id" title="var">e</span>:<a class="idref" href="Brenner.ResourceDependency.html#event"><span class="id" title="definition">event</span></a>) (<span class="id" title="var">p</span>:<a class="idref" href="Brenner.Vars.html#tid"><span class="id" title="definition">tid</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">*</span></a><a class="idref" href="Brenner.ResourceDependency.html#event"><span class="id" title="definition">event</span></a>) :=<br/>    <span class="id" title="keyword">let</span> (<span class="id" title="var">t</span>, <span class="id" title="var">e'</span>) := <a class="idref" href="Brenner.DependencyStateImpl.html#p"><span class="id" title="variable">p</span></a> <span class="id" title="tactic">in</span><br/>    <span class="id" title="keyword">if</span> <a class="idref" href="Brenner.DependencyStateImpl.html#Props.prec_dec"><span class="id" title="variable">prec_dec</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#e'"><span class="id" title="variable">e'</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#e"><span class="id" title="variable">e</span></a> <span class="id" title="keyword">then</span> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="Brenner.DependencyStateImpl.html#e"><span class="id" title="variable">e</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#t"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a><br/>    <span class="id" title="keyword">else</span> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>  <span class="id" title="tactic">in</span><br/>  <span class="id" title="keyword">let</span> <span class="id" title="var">reg</span> := <a class="idref" href="Brenner.DependencyStateImpl.html#registered"><span class="id" title="definition">registered</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#s"><span class="id" title="variable">s</span></a> <span class="id" title="tactic">in</span><br/>  <span class="id" title="keyword">let</span> <span class="id" title="var">handle</span> <span class="id" title="var">e</span> :=<br/>    <span class="id" title="definition">List.omap</span> (<a class="idref" href="Brenner.DependencyStateImpl.html#handle_entry"><span class="id" title="variable">handle_entry</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#e"><span class="id" title="variable">e</span></a>) <a class="idref" href="Brenner.DependencyStateImpl.html#reg"><span class="id" title="variable">reg</span></a><br/>  <span class="id" title="tactic">in</span><br/>  <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Lists.List.html#flat_map"><span class="id" title="definition">flat_map</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#handle"><span class="id" title="variable">handle</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#es"><span class="id" title="variable">es</span></a>.<br/><span class="id" title="keyword">Let</span> <a name="Props.impeded_by_1"><span class="id" title="variable">impeded_by_1</span></a>:<br/>  <span class="id" title="keyword">forall</span> <span class="id" title="var">t</span> <span class="id" title="var">e</span> <span class="id" title="var">s</span>,<br/>  <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="Brenner.DependencyStateImpl.html#e"><span class="id" title="variable">e</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#t"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> (<a class="idref" href="Brenner.DependencyStateImpl.html#impeded_by"><span class="id" title="definition">impeded_by</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#s"><span class="id" title="variable">s</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>  <a class="idref" href="Brenner.ResourceDependency.html#ImpededBy"><span class="id" title="definition">ImpededBy</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#t"><span class="id" title="variable">t</span></a>.<br/><span class="id" title="keyword">Let</span> <a name="Props.impeded_by_2"><span class="id" title="variable">impeded_by_2</span></a>:<br/>  <span class="id" title="keyword">forall</span> <span class="id" title="var">t</span> <span class="id" title="var">e</span> <span class="id" title="var">s</span>,<br/>  <a class="idref" href="Brenner.ResourceDependency.html#ImpededBy"><span class="id" title="definition">ImpededBy</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>  <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="Brenner.DependencyStateImpl.html#e"><span class="id" title="variable">e</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#t"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> (<a class="idref" href="Brenner.DependencyStateImpl.html#impeded_by"><span class="id" title="definition">impeded_by</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#s"><span class="id" title="variable">s</span></a>).<br/><span class="id" title="keyword">Let</span> <a name="Props.impeded_by_spec"><span class="id" title="variable">impeded_by_spec</span></a>:<br/>  <span class="id" title="keyword">forall</span> <span class="id" title="var">t</span> <span class="id" title="var">e</span> <span class="id" title="var">s</span>,<br/>  <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="Brenner.DependencyStateImpl.html#e"><span class="id" title="variable">e</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#t"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> (<a class="idref" href="Brenner.DependencyStateImpl.html#impeded_by"><span class="id" title="definition">impeded_by</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#s"><span class="id" title="variable">s</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#df1ced36fc33ce188051218bca314374"><span class="id" title="notation">&lt;-&gt;</span></a><br/>  <a class="idref" href="Brenner.ResourceDependency.html#ImpededBy"><span class="id" title="definition">ImpededBy</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#t"><span class="id" title="variable">t</span></a>.<br/><span class="id" title="keyword">Let</span> <a name="Props.evt_eq_helper"><span class="id" title="variable">evt_eq_helper</span></a>:<br/>  <span class="id" title="keyword">forall</span> <span class="id" title="var">k1</span> <span class="id" title="var">k2</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#k1"><span class="id" title="variable">k1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#k2"><span class="id" title="variable">k2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">/\</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#k1"><span class="id" title="variable">k1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#k2"><span class="id" title="variable">k2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#k1"><span class="id" title="variable">k1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#k2"><span class="id" title="variable">k2</span></a>.<br/><span class="id" title="keyword">Definition</span> <a name="to_impeded_by"><span class="id" title="definition">to_impeded_by</span></a> <span class="id" title="var">s</span> := <a class="idref" href="Brenner.DependencyStateImpl.html#unproject"><span class="id" title="definition">I.unproject</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#Props.evt_eq_helper"><span class="id" title="variable">evt_eq_helper</span></a> (<a class="idref" href="Brenner.DependencyStateImpl.html#impeded_by"><span class="id" title="definition">impeded_by</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#s"><span class="id" title="variable">s</span></a>).<br/><span class="id" title="keyword">Let</span> <a name="Props.impeded_by_total"><span class="id" title="variable">impeded_by_total</span></a>:<br/>  <span class="id" title="keyword">forall</span> (<span class="id" title="var">s</span>:<a class="idref" href="Brenner.Semantics.html#state"><span class="id" title="definition">state</span></a>),<br/>  <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">(</span></a><span class="id" title="var">i</span>:<a class="idref" href="Brenner.DependencyState.html#t_impeded_by"><span class="id" title="definition">t_impeded_by</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">),</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#I_of"><span class="id" title="definition">I_of</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#i"><span class="id" title="variable">i</span></a>.<br/><span class="id" title="keyword">Theorem</span> <a name="deps_of_total"><span class="id" title="lemma">deps_of_total</span></a>:<br/>  <span class="id" title="keyword">forall</span> <span class="id" title="var">s</span>,<br/>  <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">exists</span></a> <span class="id" title="var">d</span><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#Deps_of"><span class="id" title="definition">Deps_of</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Brenner.DependencyStateImpl.html#d"><span class="id" title="variable">d</span></a>.<br/><span class="id" title="keyword">End</span> <a class="idref" href="Brenner.DependencyStateImpl.html#Props"><span class="id" title="section">Props</span></a>.<br/></pre>
