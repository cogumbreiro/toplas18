---
layout: default
---
<pre class="code"><span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Brenner.Brenner.html#"><span class="id" title="library">Brenner</span></a>.<br/><span class="id" title="keyword">Import</span> <span class="id" title="var">Syntax.CST</span>.<br/></pre>
<a name="lab5"><h1>An example</h1></a>
<pre class="code"><span class="id" title="keyword">Definition</span> <a name="t1"><span class="id" title="definition">t1</span></a> := 1.<br/><span class="id" title="keyword">Definition</span> <a name="td"><span class="id" title="definition">td</span></a> := 2.<br/><span class="id" title="keyword">Definition</span> <a name="ph1"><span class="id" title="definition">ph1</span></a> := 1.<br/><span class="id" title="keyword">Parameter</span> <a name="bf"><span class="id" title="axiom">bf</span></a> : <a class="idref" href="Brenner.Syntax.html#prog"><span class="id" title="inductive">prog</span></a>.<br/><span class="id" title="keyword">Definition</span> <a name="bl"><span class="id" title="definition">bl</span></a> := <a class="idref" href="Brenner.Example1.html#t1"><span class="id" title="definition">t1</span></a> <a class="idref" href="Brenner.Syntax.html#c98a4958d9ae301ca118d074b08c512e"><span class="id" title="notation">&lt;-</span></a> <a class="idref" href="Brenner.Syntax.html#c98a4958d9ae301ca118d074b08c512e"><span class="id" title="notation">NEW_TID</span></a><a class="idref" href="Brenner.Syntax.html#5539c70def9f1669185cba3822db09b1"><span class="id" title="notation">;;</span></a> <a class="idref" href="Brenner.Syntax.html#f536a56f62c99a02f4929cabff0efab8"><span class="id" title="notation">REG</span></a><a class="idref" href="Brenner.Syntax.html#f536a56f62c99a02f4929cabff0efab8"><span class="id" title="notation">(</span></a><a class="idref" href="Brenner.Example1.html#ph1"><span class="id" title="definition">ph1</span></a><a class="idref" href="Brenner.Syntax.html#f536a56f62c99a02f4929cabff0efab8"><span class="id" title="notation">,</span></a> <a class="idref" href="Brenner.Example1.html#t1"><span class="id" title="definition">t1</span></a><a class="idref" href="Brenner.Syntax.html#f536a56f62c99a02f4929cabff0efab8"><span class="id" title="notation">)</span></a><a class="idref" href="Brenner.Syntax.html#5539c70def9f1669185cba3822db09b1"><span class="id" title="notation">;;</span></a> <a class="idref" href="Brenner.Syntax.html#d8ee6173c1a692ce78d6e35b9228c510"><span class="id" title="notation">FORK</span></a><a class="idref" href="Brenner.Syntax.html#d8ee6173c1a692ce78d6e35b9228c510"><span class="id" title="notation">(</span></a><a class="idref" href="Brenner.Example1.html#t1"><span class="id" title="definition">t1</span></a><a class="idref" href="Brenner.Syntax.html#d8ee6173c1a692ce78d6e35b9228c510"><span class="id" title="notation">,</span></a> <a class="idref" href="Brenner.Example1.html#bf"><span class="id" title="axiom">bf</span></a><a class="idref" href="Brenner.Syntax.html#d8ee6173c1a692ce78d6e35b9228c510"><span class="id" title="notation">)</span></a><a class="idref" href="Brenner.Syntax.html#5539c70def9f1669185cba3822db09b1"><span class="id" title="notation">;;</span></a> <a class="idref" href="Brenner.Syntax.html#769f5965a12b38fb0137298cbc76e4be"><span class="id" title="notation">END</span></a>.<br/><span class="id" title="keyword">Definition</span> <a name="bd"><span class="id" title="definition">bd</span></a> := <a class="idref" href="Brenner.Syntax.html#f0a0364c9088f8c189b6a850e2766538"><span class="id" title="notation">LOOP</span></a><a class="idref" href="Brenner.Syntax.html#f0a0364c9088f8c189b6a850e2766538"><span class="id" title="notation">(</span></a><a class="idref" href="Brenner.Example1.html#bl"><span class="id" title="definition">bl</span></a><a class="idref" href="Brenner.Syntax.html#f0a0364c9088f8c189b6a850e2766538"><span class="id" title="notation">)</span></a> <a class="idref" href="Brenner.Syntax.html#5539c70def9f1669185cba3822db09b1"><span class="id" title="notation">;;</span></a> <a class="idref" href="Brenner.Syntax.html#3142346a70a43e995e45e3621f394cf4"><span class="id" title="notation">DEREG</span></a><a class="idref" href="Brenner.Syntax.html#3142346a70a43e995e45e3621f394cf4"><span class="id" title="notation">(</span></a><a class="idref" href="Brenner.Example1.html#ph1"><span class="id" title="definition">ph1</span></a><a class="idref" href="Brenner.Syntax.html#3142346a70a43e995e45e3621f394cf4"><span class="id" title="notation">)</span></a><a class="idref" href="Brenner.Syntax.html#5539c70def9f1669185cba3822db09b1"><span class="id" title="notation">;;</span></a> <a class="idref" href="Brenner.Syntax.html#769f5965a12b38fb0137298cbc76e4be"><span class="id" title="notation">END</span></a>.<br/><span class="id" title="keyword">Definition</span> <a name="b"><span class="id" title="definition">b</span></a> := <a class="idref" href="Brenner.Example1.html#ph1"><span class="id" title="definition">ph1</span></a> <a class="idref" href="Brenner.Syntax.html#1abc30b67be8d339933234dfac8a8e1b"><span class="id" title="notation">&lt;-</span></a> <a class="idref" href="Brenner.Syntax.html#1abc30b67be8d339933234dfac8a8e1b"><span class="id" title="notation">NEW_PHASER</span></a><a class="idref" href="Brenner.Syntax.html#5539c70def9f1669185cba3822db09b1"><span class="id" title="notation">;;</span></a> <a class="idref" href="Brenner.Example1.html#bd"><span class="id" title="definition">bd</span></a>.<br/><span class="id" title="keyword">Definition</span> <a name="s1_tm"><span class="id" title="definition">s1_tm</span></a> := <a class="idref" href="Brenner.TaskMap.html#add"><span class="id" title="definition">TaskMap.add</span></a> <a class="idref" href="Brenner.Example1.html#td"><span class="id" title="definition">td</span></a> <a class="idref" href="Brenner.Example1.html#b"><span class="id" title="definition">b</span></a> <a class="idref" href="Brenner.TaskMap.html#make"><span class="id" title="definition">TaskMap.make</span></a>.<br/></pre>
<p>Initializes an abstract state from a program.</p>
<pre class="code"><span class="id" title="keyword">Definition</span> <a name="s1"><span class="id" title="definition">s1</span></a> := <a class="idref" href="Brenner.Semantics.html#load"><span class="id" title="definition">load</span></a> <a class="idref" href="Brenner.Example1.html#td"><span class="id" title="definition">td</span></a> <a class="idref" href="Brenner.Example1.html#b"><span class="id" title="definition">b</span></a>.<br/></pre>
<p>Performs the first reduction step that creates a phaser.</p>
<pre class="code"><span class="id" title="keyword">Definition</span> <a name="s2_td"><span class="id" title="definition">s2_td</span></a> := <a class="idref" href="Brenner.Example1.html#bd"><span class="id" title="definition">bd</span></a>.<br/><span class="id" title="keyword">Definition</span> <a name="s2_tm"><span class="id" title="definition">s2_tm</span></a> := <a class="idref" href="Brenner.TaskMap.html#add"><span class="id" title="definition">add</span></a> <a class="idref" href="Brenner.Example1.html#td"><span class="id" title="definition">td</span></a> <a class="idref" href="Brenner.Example1.html#s2_td"><span class="id" title="definition">s2_td</span></a> <a class="idref" href="Brenner.Example1.html#s1_tm"><span class="id" title="definition">s1_tm</span></a>.<br/><span class="id" title="keyword">Definition</span> <a name="s2_pm"><span class="id" title="definition">s2_pm</span></a> := <a class="idref" href="Brenner.PhaserMap.html#eval"><span class="id" title="definition">PhaserMap.eval</span></a> <a class="idref" href="Brenner.PhaserMap.html#make"><span class="id" title="definition">PhaserMap.make</span></a> <a class="idref" href="Brenner.Example1.html#td"><span class="id" title="definition">td</span></a> (<a class="idref" href="Brenner.PhaserMap.html#NEW"><span class="id" title="constructor">PhaserMap.NEW</span></a> <a class="idref" href="Brenner.Example1.html#ph1"><span class="id" title="definition">ph1</span></a>).<br/><span class="id" title="keyword">Definition</span> <a name="s2"><span class="id" title="definition">s2</span></a> :<a class="idref" href="Brenner.Semantics.html#state"><span class="id" title="definition">state</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="Brenner.Example1.html#s2_pm"><span class="id" title="definition">s2_pm</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="Brenner.Example1.html#s2_tm"><span class="id" title="definition">s2_tm</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>.<br/><span class="id" title="keyword">Lemma</span> <a name="td_In_s1_tm"><span class="id" title="lemma">td_In_s1_tm</span></a> : <a class="idref" href="Brenner.TaskMap.html#MapsTo"><span class="id" title="definition">TaskMap.MapsTo</span></a> <a class="idref" href="Brenner.Example1.html#td"><span class="id" title="definition">td</span></a> <a class="idref" href="Brenner.Example1.html#b"><span class="id" title="definition">b</span></a> <a class="idref" href="Brenner.Example1.html#s1_tm"><span class="id" title="definition">s1_tm</span></a>.<br/><span class="id" title="keyword">Goal</span> <a class="idref" href="Brenner.Semantics.html#Reduces"><span class="id" title="inductive">Reduces</span></a> <a class="idref" href="Brenner.Example1.html#s1"><span class="id" title="definition">s1</span></a> <a class="idref" href="Brenner.Example1.html#s2"><span class="id" title="definition">s2</span></a>.<br/><span class="id" title="keyword">Definition</span> <a name="s3_td"><span class="id" title="definition">s3_td</span></a> := <a class="idref" href="Brenner.Example1.html#t1"><span class="id" title="definition">t1</span></a> <a class="idref" href="Brenner.Syntax.html#c98a4958d9ae301ca118d074b08c512e"><span class="id" title="notation">&lt;-</span></a> <a class="idref" href="Brenner.Syntax.html#c98a4958d9ae301ca118d074b08c512e"><span class="id" title="notation">NEW_TID</span></a><a class="idref" href="Brenner.Syntax.html#5539c70def9f1669185cba3822db09b1"><span class="id" title="notation">;;</span></a> <a class="idref" href="Brenner.Syntax.html#f536a56f62c99a02f4929cabff0efab8"><span class="id" title="notation">REG</span></a><a class="idref" href="Brenner.Syntax.html#f536a56f62c99a02f4929cabff0efab8"><span class="id" title="notation">(</span></a><a class="idref" href="Brenner.Example1.html#ph1"><span class="id" title="definition">ph1</span></a><a class="idref" href="Brenner.Syntax.html#f536a56f62c99a02f4929cabff0efab8"><span class="id" title="notation">,</span></a> <a class="idref" href="Brenner.Example1.html#t1"><span class="id" title="definition">t1</span></a><a class="idref" href="Brenner.Syntax.html#f536a56f62c99a02f4929cabff0efab8"><span class="id" title="notation">)</span></a><a class="idref" href="Brenner.Syntax.html#5539c70def9f1669185cba3822db09b1"><span class="id" title="notation">;;</span></a> <a class="idref" href="Brenner.Syntax.html#d8ee6173c1a692ce78d6e35b9228c510"><span class="id" title="notation">FORK</span></a><a class="idref" href="Brenner.Syntax.html#d8ee6173c1a692ce78d6e35b9228c510"><span class="id" title="notation">(</span></a><a class="idref" href="Brenner.Example1.html#t1"><span class="id" title="definition">t1</span></a><a class="idref" href="Brenner.Syntax.html#d8ee6173c1a692ce78d6e35b9228c510"><span class="id" title="notation">,</span></a> <a class="idref" href="Brenner.Example1.html#bf"><span class="id" title="axiom">bf</span></a><a class="idref" href="Brenner.Syntax.html#d8ee6173c1a692ce78d6e35b9228c510"><span class="id" title="notation">)</span></a><a class="idref" href="Brenner.Syntax.html#5539c70def9f1669185cba3822db09b1"><span class="id" title="notation">;;</span></a> <a class="idref" href="Brenner.Example1.html#bd"><span class="id" title="definition">bd</span></a>.<br/><span class="id" title="keyword">Definition</span> <a name="s3_tm"><span class="id" title="definition">s3_tm</span></a> := <a class="idref" href="Brenner.TaskMap.html#add"><span class="id" title="definition">TaskMap.add</span></a> <a class="idref" href="Brenner.Example1.html#td"><span class="id" title="definition">td</span></a> <a class="idref" href="Brenner.Example1.html#s3_td"><span class="id" title="definition">s3_td</span></a> <a class="idref" href="Brenner.Example1.html#s2_tm"><span class="id" title="definition">s2_tm</span></a>.<br/><span class="id" title="keyword">Definition</span> <a name="s3_pm"><span class="id" title="definition">s3_pm</span></a> := <a class="idref" href="Brenner.Example1.html#s2_pm"><span class="id" title="definition">s2_pm</span></a>.<br/><span class="id" title="keyword">Definition</span> <a name="s3"><span class="id" title="definition">s3</span></a> :<a class="idref" href="Brenner.Semantics.html#state"><span class="id" title="definition">state</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="Brenner.Example1.html#s3_pm"><span class="id" title="definition">s3_pm</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="Brenner.Example1.html#s3_tm"><span class="id" title="definition">s3_tm</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>.<br/></pre>
<p>The next reduction step is to unfold the loop.</p>
<pre class="code"><span class="id" title="keyword">Goal</span> <a class="idref" href="Brenner.Semantics.html#Reduces"><span class="id" title="inductive">Reduces</span></a> <a class="idref" href="Brenner.Example1.html#s2"><span class="id" title="definition">s2</span></a> <a class="idref" href="Brenner.Example1.html#s3"><span class="id" title="definition">s3</span></a>.<br/></pre>
