---
layout: default
---

<a name="lab6"><h1>Resource dependency state</h1></a><p>We define an event as a pair of phaser ids and a natural (the phase).</p>
<pre class="code"><span class="id" title="keyword">Module</span> <a name="EVT"><span class="id" title="module">EVT</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Structures.OrderedTypeEx.html#PairOrderedType"><span class="id" title="module">PairOrderedType</span></a> <a class="idref" href="Brenner.Vars.html#PHID"><span class="id" title="module">PHID</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Structures.OrderedTypeEx.html#Nat_as_OT"><span class="id" title="module">Nat_as_OT</span></a>.<br/><span class="id" title="keyword">Definition</span> <a name="event"><span class="id" title="definition">event</span></a> := <a class="idref" href="Brenner.ResourceDependency.html#t"><span class="id" title="axiom">EVT.t</span></a>.<br/></pre>
<p>Function <span class="inlinecode"><span class="id" title="var">get_phaser</span></span> obtains the phaser id in the event.</p>
<pre class="code"><span class="id" title="keyword">Definition</span> <a name="get_phaser"><span class="id" title="definition">get_phaser</span></a> (<span class="id" title="var">e</span>:<a class="idref" href="Brenner.ResourceDependency.html#event"><span class="id" title="definition">event</span></a>) : <a class="idref" href="Brenner.Vars.html#phid"><span class="id" title="definition">phid</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="Brenner.ResourceDependency.html#e"><span class="id" title="variable">e</span></a>.<br/></pre>
<p>Function <span class="inlinecode"><span class="id" title="var">get_phase</span></span> obtains the phase number of the event.</p>
<pre class="code"><span class="id" title="keyword">Definition</span> <a name="get_phase"><span class="id" title="definition">get_phase</span></a> (<span class="id" title="var">e</span>:<a class="idref" href="Brenner.ResourceDependency.html#event"><span class="id" title="definition">event</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="Brenner.ResourceDependency.html#e"><span class="id" title="variable">e</span></a>.<br/></pre>
<p>Phases from the same phaser are in a precedes relation.</p>
<pre class="code"><span class="id" title="keyword">Definition</span> <a name="prec"><span class="id" title="definition">prec</span></a> (<span class="id" title="var">e1</span>:<a class="idref" href="Brenner.ResourceDependency.html#event"><span class="id" title="definition">event</span></a>) (<span class="id" title="var">e2</span>:<a class="idref" href="Brenner.ResourceDependency.html#event"><span class="id" title="definition">event</span></a>) :=<br/>  <a class="idref" href="Brenner.ResourceDependency.html#get_phaser"><span class="id" title="definition">get_phaser</span></a> <a class="idref" href="Brenner.ResourceDependency.html#e1"><span class="id" title="variable">e1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="Brenner.ResourceDependency.html#get_phaser"><span class="id" title="definition">get_phaser</span></a> <a class="idref" href="Brenner.ResourceDependency.html#e2"><span class="id" title="variable">e2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">/\</span></a> <a class="idref" href="Brenner.ResourceDependency.html#get_phase"><span class="id" title="definition">get_phase</span></a> <a class="idref" href="Brenner.ResourceDependency.html#e1"><span class="id" title="variable">e1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Peano.html#989c98e7ddd65d5bf37c334ff2076de8"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="Brenner.ResourceDependency.html#get_phase"><span class="id" title="definition">get_phase</span></a> <a class="idref" href="Brenner.ResourceDependency.html#e2"><span class="id" title="variable">e2</span></a>.<br/></pre>
<p>Let <span class="inlinecode"><span class="id" title="var">s</span></span> be a <span class="inlinecode"><span class="id" title="var">state</span></span> .
We say that a task <span class="inlinecode"><span class="id" title="var">t</span></span> is waiting for an event <span class="inlinecode"><span class="id" title="var">e</span></span> when task <span class="inlinecode"><span class="id" title="var">t</span></span> is executing an instruction <span class="inlinecode"><span class="id" title="var">Await</span></span> and
the target phaser is defined in the phaser map.</p>
<pre class="code"><span class="id" title="keyword">Definition</span> <a name="WaitOn"><span class="id" title="definition">WaitOn</span></a> (<span class="id" title="var">t</span>:<a class="idref" href="Brenner.Vars.html#tid"><span class="id" title="definition">tid</span></a>) (<span class="id" title="var">e</span>:<a class="idref" href="Brenner.ResourceDependency.html#event"><span class="id" title="definition">event</span></a>) :=<br/>  <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">exists</span></a> <span class="id" title="var">prg</span><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a><br/>  <a class="idref" href="Brenner.Vars.html#Map_TID.MapsTo"><span class="id" title="definition">Map_TID.MapsTo</span></a> <a class="idref" href="Brenner.ResourceDependency.html#t"><span class="id" title="variable">t</span></a> (<a class="idref" href="Brenner.Syntax.html#pcons"><span class="id" title="constructor">pcons</span></a> (<a class="idref" href="Brenner.Syntax.html#await"><span class="id" title="constructor">await</span></a> (<a class="idref" href="Brenner.ResourceDependency.html#get_phaser"><span class="id" title="definition">get_phaser</span></a> <a class="idref" href="Brenner.ResourceDependency.html#e"><span class="id" title="variable">e</span></a>) (<a class="idref" href="Brenner.ResourceDependency.html#get_phase"><span class="id" title="definition">get_phase</span></a> <a class="idref" href="Brenner.ResourceDependency.html#e"><span class="id" title="variable">e</span></a>)) <a class="idref" href="Brenner.ResourceDependency.html#prg"><span class="id" title="variable">prg</span></a>) (<a class="idref" href="Brenner.Semantics.html#get_tasks"><span class="id" title="definition">get_tasks</span></a> <a class="idref" href="Brenner.ResourceDependency.html#StateProps.s"><span class="id" title="variable">s</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">/\</span></a><br/>  <a class="idref" href="Brenner.Vars.html#Map_PHID.In"><span class="id" title="definition">Map_PHID.In</span></a> (<a class="idref" href="Brenner.ResourceDependency.html#get_phaser"><span class="id" title="definition">get_phaser</span></a> <a class="idref" href="Brenner.ResourceDependency.html#e"><span class="id" title="variable">e</span></a>) (<a class="idref" href="Brenner.Semantics.html#get_phasers"><span class="id" title="definition">get_phasers</span></a> <a class="idref" href="Brenner.ResourceDependency.html#StateProps.s"><span class="id" title="variable">s</span></a>).<br/></pre>
<p>A task <span class="inlinecode"><span class="id" title="var">t</span></span> is registered in an event <span class="inlinecode"><span class="id" title="var">e</span></span> if <span class="inlinecode"><span class="id" title="var">t</span></span> is registered
    in phaser <span class="inlinecode"><span class="id" title="var">get_phaser</span></span>  <span class="inlinecode"><span class="id" title="var">e</span></span> and in phase <span class="inlinecode"><span class="id" title="var">get_phase</span></span>  <span class="inlinecode"><span class="id" title="var">r</span></span> ; task <span class="inlinecode"><span class="id" title="var">t</span></span> must
    defined in the taskmap.</p>
<pre class="code"><span class="id" title="keyword">Definition</span> <a name="Registered"><span class="id" title="definition">Registered</span></a> (<span class="id" title="var">t</span>:<a class="idref" href="Brenner.Vars.html#tid"><span class="id" title="definition">tid</span></a>) (<span class="id" title="var">e</span>:<a class="idref" href="Brenner.ResourceDependency.html#event"><span class="id" title="definition">event</span></a>) :=<br/>  <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">exists</span></a> <span class="id" title="var">ph</span><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a><br/>  <a class="idref" href="Brenner.Vars.html#Map_PHID.MapsTo"><span class="id" title="definition">Map_PHID.MapsTo</span></a> (<a class="idref" href="Brenner.ResourceDependency.html#get_phaser"><span class="id" title="definition">get_phaser</span></a> <a class="idref" href="Brenner.ResourceDependency.html#e"><span class="id" title="variable">e</span></a>) <a class="idref" href="Brenner.ResourceDependency.html#ph"><span class="id" title="variable">ph</span></a> (<a class="idref" href="Brenner.Semantics.html#get_phasers"><span class="id" title="definition">get_phasers</span></a> <a class="idref" href="Brenner.ResourceDependency.html#StateProps.s"><span class="id" title="variable">s</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">/\</span></a><br/>  <a class="idref" href="Brenner.Vars.html#Map_TID.MapsTo"><span class="id" title="definition">Map_TID.MapsTo</span></a> <a class="idref" href="Brenner.ResourceDependency.html#t"><span class="id" title="variable">t</span></a> (<a class="idref" href="Brenner.ResourceDependency.html#get_phase"><span class="id" title="definition">get_phase</span></a> <a class="idref" href="Brenner.ResourceDependency.html#e"><span class="id" title="variable">e</span></a>) <a class="idref" href="Brenner.ResourceDependency.html#ph"><span class="id" title="variable">ph</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">/\</span></a> <a class="idref" href="Brenner.Vars.html#Map_TID.In"><span class="id" title="definition">Map_TID.In</span></a> <a class="idref" href="Brenner.ResourceDependency.html#t"><span class="id" title="variable">t</span></a> (<a class="idref" href="Brenner.Semantics.html#get_tasks"><span class="id" title="definition">get_tasks</span></a> <a class="idref" href="Brenner.ResourceDependency.html#StateProps.s"><span class="id" title="variable">s</span></a>).<br/><span class="id" title="keyword">Lemma</span> <a name="registered_def"><span class="id" title="lemma">registered_def</span></a>:<br/>  <span class="id" title="keyword">forall</span> <span class="id" title="var">ph</span> <span class="id" title="var">e</span> <span class="id" title="var">t</span>,<br/>  <a class="idref" href="Brenner.Vars.html#Map_PHID.MapsTo"><span class="id" title="definition">Map_PHID.MapsTo</span></a> (<a class="idref" href="Brenner.ResourceDependency.html#get_phaser"><span class="id" title="definition">get_phaser</span></a> <a class="idref" href="Brenner.ResourceDependency.html#e"><span class="id" title="variable">e</span></a>) <a class="idref" href="Brenner.ResourceDependency.html#ph"><span class="id" title="variable">ph</span></a> (<a class="idref" href="Brenner.Semantics.html#get_phasers"><span class="id" title="definition">get_phasers</span></a> <a class="idref" href="Brenner.ResourceDependency.html#StateProps.s"><span class="id" title="variable">s</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>  <a class="idref" href="Brenner.Vars.html#Map_TID.MapsTo"><span class="id" title="definition">Map_TID.MapsTo</span></a> <a class="idref" href="Brenner.ResourceDependency.html#t"><span class="id" title="variable">t</span></a> (<a class="idref" href="Brenner.ResourceDependency.html#get_phase"><span class="id" title="definition">get_phase</span></a> <a class="idref" href="Brenner.ResourceDependency.html#e"><span class="id" title="variable">e</span></a>) <a class="idref" href="Brenner.ResourceDependency.html#ph"><span class="id" title="variable">ph</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>  <a class="idref" href="Brenner.Vars.html#Map_TID.In"><span class="id" title="definition">Map_TID.In</span></a> <a class="idref" href="Brenner.ResourceDependency.html#t"><span class="id" title="variable">t</span></a> (<a class="idref" href="Brenner.Semantics.html#get_tasks"><span class="id" title="definition">get_tasks</span></a> <a class="idref" href="Brenner.ResourceDependency.html#StateProps.s"><span class="id" title="variable">s</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>  <a class="idref" href="Brenner.ResourceDependency.html#Registered"><span class="id" title="definition">Registered</span></a> <a class="idref" href="Brenner.ResourceDependency.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Brenner.ResourceDependency.html#e"><span class="id" title="variable">e</span></a>.<br/><span class="id" title="keyword">Lemma</span> <a name="registered_in_tasks"><span class="id" title="lemma">registered_in_tasks</span></a>:<br/>  <span class="id" title="keyword">forall</span> <span class="id" title="var">t</span> <span class="id" title="var">e</span>,<br/>  <a class="idref" href="Brenner.ResourceDependency.html#Registered"><span class="id" title="definition">Registered</span></a> <a class="idref" href="Brenner.ResourceDependency.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Brenner.ResourceDependency.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>  <a class="idref" href="Brenner.Vars.html#Map_TID.In"><span class="id" title="definition">Map_TID.In</span></a> <a class="idref" href="Brenner.ResourceDependency.html#t"><span class="id" title="variable">t</span></a> (<a class="idref" href="Brenner.Semantics.html#get_tasks"><span class="id" title="definition">get_tasks</span></a> <a class="idref" href="Brenner.ResourceDependency.html#StateProps.s"><span class="id" title="variable">s</span></a>).<br/></pre>
<p>an event <span class="inlinecode"><span class="id" title="var">e</span></span> impedes a task <span class="inlinecode"><span class="id" title="var">t</span></span> this task is registered in a
   event <span class="inlinecode"><span class="id" title="var">e'</span></span> that precedes <span class="inlinecode"><span class="id" title="var">e</span></span> ; the impeding event must be the target of
   a blocked task.</p>
<pre class="code"><span class="id" title="keyword">Definition</span> <a name="ImpededBy"><span class="id" title="definition">ImpededBy</span></a>(<span class="id" title="var">e</span>:<a class="idref" href="Brenner.ResourceDependency.html#event"><span class="id" title="definition">event</span></a>) (<span class="id" title="var">t</span>:<a class="idref" href="Brenner.Vars.html#tid"><span class="id" title="definition">tid</span></a>) :=<br/>  <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">exists</span></a> <span class="id" title="var">t'</span><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a> <a class="idref" href="Brenner.ResourceDependency.html#WaitOn"><span class="id" title="definition">WaitOn</span></a> <a class="idref" href="Brenner.ResourceDependency.html#t'"><span class="id" title="variable">t'</span></a> <a class="idref" href="Brenner.ResourceDependency.html#e"><span class="id" title="variable">e</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">/\</span></a><br/>  <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">exists</span></a> <span class="id" title="var">e'</span><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a> <a class="idref" href="Brenner.ResourceDependency.html#Registered"><span class="id" title="definition">Registered</span></a> <a class="idref" href="Brenner.ResourceDependency.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Brenner.ResourceDependency.html#e'"><span class="id" title="variable">e'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">/\</span></a> <a class="idref" href="Brenner.ResourceDependency.html#prec"><span class="id" title="definition">prec</span></a> <a class="idref" href="Brenner.ResourceDependency.html#e'"><span class="id" title="variable">e'</span></a> <a class="idref" href="Brenner.ResourceDependency.html#e"><span class="id" title="variable">e</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">)</span></a>.<br/><span class="id" title="keyword">Lemma</span> <a name="impeded_by_def"><span class="id" title="lemma">impeded_by_def</span></a>:<br/>  <span class="id" title="keyword">forall</span> <span class="id" title="var">e</span> <span class="id" title="var">t</span> <span class="id" title="var">t'</span> <span class="id" title="var">e'</span>,<br/>  <a class="idref" href="Brenner.ResourceDependency.html#WaitOn"><span class="id" title="definition">WaitOn</span></a> <a class="idref" href="Brenner.ResourceDependency.html#t'"><span class="id" title="variable">t'</span></a> <a class="idref" href="Brenner.ResourceDependency.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>  <a class="idref" href="Brenner.ResourceDependency.html#Registered"><span class="id" title="definition">Registered</span></a> <a class="idref" href="Brenner.ResourceDependency.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Brenner.ResourceDependency.html#e'"><span class="id" title="variable">e'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>  <a class="idref" href="Brenner.ResourceDependency.html#prec"><span class="id" title="definition">prec</span></a> <a class="idref" href="Brenner.ResourceDependency.html#e'"><span class="id" title="variable">e'</span></a> <a class="idref" href="Brenner.ResourceDependency.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>  <a class="idref" href="Brenner.ResourceDependency.html#ImpededBy"><span class="id" title="definition">ImpededBy</span></a> <a class="idref" href="Brenner.ResourceDependency.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="Brenner.ResourceDependency.html#t"><span class="id" title="variable">t</span></a>.<br/><span class="id" title="keyword">Lemma</span> <a name="impeded_by_in_tasks"><span class="id" title="lemma">impeded_by_in_tasks</span></a>:<br/>  <span class="id" title="keyword">forall</span> <span class="id" title="var">t</span> <span class="id" title="var">e</span>,<br/>  <a class="idref" href="Brenner.ResourceDependency.html#ImpededBy"><span class="id" title="definition">ImpededBy</span></a> <a class="idref" href="Brenner.ResourceDependency.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="Brenner.ResourceDependency.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>  <a class="idref" href="Brenner.Vars.html#Map_TID.In"><span class="id" title="definition">Map_TID.In</span></a> <a class="idref" href="Brenner.ResourceDependency.html#t"><span class="id" title="variable">t</span></a> (<a class="idref" href="Brenner.Semantics.html#get_tasks"><span class="id" title="definition">get_tasks</span></a> <a class="idref" href="Brenner.ResourceDependency.html#StateProps.s"><span class="id" title="variable">s</span></a>).<br/><span class="id" title="keyword">End</span> <a class="idref" href="Brenner.ResourceDependency.html#StateProps"><span class="id" title="section">StateProps</span></a>.<br/></pre>
<p>We now characterize a deadlocked state.
    Let <span class="inlinecode"><span class="id" title="var">AllTasksWaitFor</span></span> be a state such that all tasks in the state
    are waiting for an event.</p>
<pre class="code"><span class="id" title="keyword">Definition</span> <a name="AllTasksWaitOn"><span class="id" title="definition">AllTasksWaitOn</span></a> <span class="id" title="var">s</span> :=<br/>  <span class="id" title="keyword">forall</span> <span class="id" title="var">t</span>, (<a class="idref" href="Brenner.Vars.html#Map_TID.In"><span class="id" title="definition">Map_TID.In</span></a> <a class="idref" href="Brenner.ResourceDependency.html#t"><span class="id" title="variable">t</span></a> (<a class="idref" href="Brenner.Semantics.html#get_tasks"><span class="id" title="definition">get_tasks</span></a> <a class="idref" href="Brenner.ResourceDependency.html#s"><span class="id" title="variable">s</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">exists</span></a> <span class="id" title="var">e</span><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a> <a class="idref" href="Brenner.ResourceDependency.html#WaitOn"><span class="id" title="definition">WaitOn</span></a> <a class="idref" href="Brenner.ResourceDependency.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Brenner.ResourceDependency.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Brenner.ResourceDependency.html#e"><span class="id" title="variable">e</span></a>).<br/></pre>
<p>Let <span class="inlinecode"><span class="id" title="var">AllBlockedRegistered</span></span> be a state such that any task waiting for
    an event, that event is also impeding another task in the state.</p>
<pre class="code"><span class="id" title="keyword">Definition</span> <a name="AllImpededBy"><span class="id" title="definition">AllImpededBy</span></a> <span class="id" title="var">s</span> :=<br/>  <span class="id" title="keyword">forall</span> <span class="id" title="var">t</span> <span class="id" title="var">e</span>, <a class="idref" href="Brenner.ResourceDependency.html#WaitOn"><span class="id" title="definition">WaitOn</span></a> <a class="idref" href="Brenner.ResourceDependency.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Brenner.ResourceDependency.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Brenner.ResourceDependency.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">exists</span></a> <span class="id" title="var">t'</span><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a> <a class="idref" href="Brenner.ResourceDependency.html#ImpededBy"><span class="id" title="definition">ImpededBy</span></a> <a class="idref" href="Brenner.ResourceDependency.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Brenner.ResourceDependency.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="Brenner.ResourceDependency.html#t'"><span class="id" title="variable">t'</span></a>.<br/></pre>
<p>A totally deadlocked state is such that all tasks are waiting for
    events that are impeding a tasks in the task map.</p>
<pre class="code"><span class="id" title="keyword">Definition</span> <a name="TotallyDeadlocked"><span class="id" title="definition">TotallyDeadlocked</span></a> (<span class="id" title="var">s</span>:<a class="idref" href="Brenner.Semantics.html#state"><span class="id" title="definition">state</span></a>) :=<br/>  <a class="idref" href="Brenner.ResourceDependency.html#AllTasksWaitOn"><span class="id" title="definition">AllTasksWaitOn</span></a> <a class="idref" href="Brenner.ResourceDependency.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">/\</span></a> <a class="idref" href="Brenner.ResourceDependency.html#AllImpededBy"><span class="id" title="definition">AllImpededBy</span></a> <a class="idref" href="Brenner.ResourceDependency.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">/\</span></a><br/>  <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">exists</span></a> <span class="id" title="var">t</span><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a> <a class="idref" href="Brenner.Vars.html#Map_TID.In"><span class="id" title="definition">Map_TID.In</span></a> <a class="idref" href="Brenner.ResourceDependency.html#t"><span class="id" title="variable">t</span></a> (<a class="idref" href="Brenner.Semantics.html#get_tasks"><span class="id" title="definition">get_tasks</span></a> <a class="idref" href="Brenner.ResourceDependency.html#s"><span class="id" title="variable">s</span></a>). 
<br/></pre>
<p>A <span class="inlinecode"><span class="id" title="var">Deadlocked</span></span> state is such that we can take a partition of the task
    map <span class="inlinecode"><span class="id" title="var">tm</span></span> and <span class="inlinecode"><span class="id" title="var">tm'</span></span> such that the state <span class="inlinecode">(<span class="id" title="var">get_phasers</span></span>  <span class="inlinecode"><span class="id" title="var">s</span>,</span>  <span class="inlinecode"><span class="id" title="var">tm</span>)</span> is
    totally deadlock.</p>
<pre class="code"><span class="id" title="keyword">Definition</span> <a name="Deadlocked"><span class="id" title="definition">Deadlocked</span></a> (<span class="id" title="var">s</span>:<a class="idref" href="Brenner.Semantics.html#state"><span class="id" title="definition">state</span></a>) :=<br/>  <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">exists</span></a> <span class="id" title="var">tm</span> <span class="id" title="var">tm'</span><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a><br/>  <a class="idref" href="Brenner.Vars.html#Map_TID_Props.Partition"><span class="id" title="definition">Map_TID_Props.Partition</span></a> (<a class="idref" href="Brenner.Semantics.html#get_tasks"><span class="id" title="definition">get_tasks</span></a> <a class="idref" href="Brenner.ResourceDependency.html#s"><span class="id" title="variable">s</span></a>) <a class="idref" href="Brenner.ResourceDependency.html#tm"><span class="id" title="variable">tm</span></a> <a class="idref" href="Brenner.ResourceDependency.html#tm'"><span class="id" title="variable">tm'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">/\</span></a><br/>  <a class="idref" href="Brenner.ResourceDependency.html#TotallyDeadlocked"><span class="id" title="definition">TotallyDeadlocked</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">((</span></a><a class="idref" href="Brenner.Semantics.html#get_phasers"><span class="id" title="definition">get_phasers</span></a> <a class="idref" href="Brenner.ResourceDependency.html#s"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">),</span></a> <a class="idref" href="Brenner.ResourceDependency.html#tm"><span class="id" title="variable">tm</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>.<br/></pre>
<p>A GRG is a bipartite graph that is defined
   from relations <span class="inlinecode"><span class="id" title="var">WaitOn</span></span> and <span class="inlinecode"><span class="id" title="var">ImpededBy</span></span> .</p>
<pre class="code"><span class="id" title="keyword">Notation</span> <a name="TEdge"><span class="id" title="abbreviation">TEdge</span></a> <span class="id" title="var">s</span> := (<span class="id" title="inductive">Bipartite.AA</span> (<a class="idref" href="Brenner.ResourceDependency.html#WaitOn"><span class="id" title="definition">WaitOn</span></a> <span class="id" title="var">s</span>) (<a class="idref" href="Brenner.ResourceDependency.html#ImpededBy"><span class="id" title="definition">ImpededBy</span></a> <span class="id" title="var">s</span>)).<br/><span class="id" title="keyword">Notation</span> <a name="REdge"><span class="id" title="abbreviation">REdge</span></a> <span class="id" title="var">s</span> := (<span class="id" title="inductive">Bipartite.BB</span> (<a class="idref" href="Brenner.ResourceDependency.html#WaitOn"><span class="id" title="definition">WaitOn</span></a> <span class="id" title="var">s</span>) (<a class="idref" href="Brenner.ResourceDependency.html#ImpededBy"><span class="id" title="definition">ImpededBy</span></a> <span class="id" title="var">s</span>)).<br/><span class="id" title="keyword">Notation</span> <a name="TWalk"><span class="id" title="abbreviation">TWalk</span></a> <span class="id" title="var">s</span> := (<span class="id" title="inductive">Walk</span> (<a class="idref" href="Brenner.ResourceDependency.html#TEdge"><span class="id" title="abbreviation">TEdge</span></a> <span class="id" title="var">s</span>)).<br/><span class="id" title="keyword">Notation</span> <a name="RWalk"><span class="id" title="abbreviation">RWalk</span></a> <span class="id" title="var">s</span> := (<span class="id" title="inductive">Walk</span> (<a class="idref" href="Brenner.ResourceDependency.html#REdge"><span class="id" title="abbreviation">REdge</span></a> <span class="id" title="var">s</span>)).<br/><span class="id" title="keyword">Notation</span> <a name="TCycle"><span class="id" title="abbreviation">TCycle</span></a> <span class="id" title="var">s</span> := (<span class="id" title="inductive">Cycle</span> (<a class="idref" href="Brenner.ResourceDependency.html#TEdge"><span class="id" title="abbreviation">TEdge</span></a> <span class="id" title="var">s</span>)).<br/><span class="id" title="keyword">Notation</span> <a name="RCycle"><span class="id" title="abbreviation">RCycle</span></a> <span class="id" title="var">s</span> := (<span class="id" title="inductive">Cycle</span> (<a class="idref" href="Brenner.ResourceDependency.html#REdge"><span class="id" title="abbreviation">REdge</span></a> <span class="id" title="var">s</span>)).<br/><span class="id" title="keyword">Notation</span> <a name="t_edge"><span class="id" title="abbreviation">t_edge</span></a> := (<a class="idref" href="Brenner.Vars.html#tid"><span class="id" title="definition">tid</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">*</span></a> <a class="idref" href="Brenner.Vars.html#tid"><span class="id" title="definition">tid</span></a>) % <span class="id" title="keyword">type</span>.<br/><span class="id" title="keyword">Notation</span> <a name="t_walk"><span class="id" title="abbreviation">t_walk</span></a> := (<a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Brenner.ResourceDependency.html#t_edge"><span class="id" title="abbreviation">t_edge</span></a>).<br/></pre>
<p>In WFG an arc from task <span class="inlinecode"><span class="id" title="var">t1</span></span> to <span class="inlinecode"><span class="id" title="var">t2</span></span> is read as <span class="inlinecode"><span class="id" title="var">t1</span></span> waits for <span class="inlinecode"><span class="id" title="var">t2</span></span> .
    In Brenner this means that there exists an event <span class="inlinecode"><span class="id" title="var">e</span></span> where task <span class="inlinecode"><span class="id" title="var">t1</span></span> is blocked and task <span class="inlinecode"><span class="id" title="var">t2</span></span> has not arrived at event <span class="inlinecode"><span class="id" title="var">e</span></span> .</p>
<pre class="code"><span class="id" title="keyword">Lemma</span> <a name="tedge_spec"><span class="id" title="lemma">tedge_spec</span></a>:<br/>  <span class="id" title="keyword">forall</span> <span class="id" title="var">s</span> (<span class="id" title="var">t1</span> <span class="id" title="var">t2</span>:<a class="idref" href="Brenner.Vars.html#tid"><span class="id" title="definition">tid</span></a>),<br/>  <a class="idref" href="Brenner.ResourceDependency.html#TEdge"><span class="id" title="abbreviation">TEdge</span></a> <a class="idref" href="Brenner.ResourceDependency.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="Brenner.ResourceDependency.html#t1"><span class="id" title="variable">t1</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="Brenner.ResourceDependency.html#t2"><span class="id" title="variable">t2</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#df1ced36fc33ce188051218bca314374"><span class="id" title="notation">&lt;-&gt;</span></a><br/>  <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">exists</span></a> <span class="id" title="var">e</span><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a><br/>  <a class="idref" href="Brenner.ResourceDependency.html#WaitOn"><span class="id" title="definition">WaitOn</span></a> <a class="idref" href="Brenner.ResourceDependency.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Brenner.ResourceDependency.html#t1"><span class="id" title="variable">t1</span></a> <a class="idref" href="Brenner.ResourceDependency.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">/\</span></a> <a class="idref" href="Brenner.ResourceDependency.html#ImpededBy"><span class="id" title="definition">ImpededBy</span></a> <a class="idref" href="Brenner.ResourceDependency.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Brenner.ResourceDependency.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="Brenner.ResourceDependency.html#t2"><span class="id" title="variable">t2</span></a>.<br/></pre>
<p>In an SG an arc from <span class="inlinecode"><span class="id" title="var">e1</span></span> to <span class="inlinecode"><span class="id" title="var">e2</span></span> can be read
    as event <span class="inlinecode"><span class="id" title="var">e1</span></span> happens before event <span class="inlinecode"><span class="id" title="var">e2</span></span> .
    In Brenner, this means that there is a task <span class="inlinecode"><span class="id" title="var">t</span></span> blocked in <span class="inlinecode"><span class="id" title="var">e2</span></span> and impedes <span class="inlinecode"><span class="id" title="var">e1</span></span> . Recall the definition
    of <span class="inlinecode"><span class="id" title="var">ImpededBy</span></span> that states that <span class="inlinecode"><span class="id" title="var">t</span></span> is registered in
    an event <span class="inlinecode"><span class="id" title="var">e'</span></span> that precedes <span class="inlinecode"><span class="id" title="var">e</span></span> ; and that event <span class="inlinecode"><span class="id" title="var">e</span></span> is obtained because there exists some task blocked
    in <span class="inlinecode"><span class="id" title="var">e</span></span> (again by definition).</p>
<pre class="code"><span class="id" title="keyword">Lemma</span> <a name="redge_spec"><span class="id" title="lemma">redge_spec</span></a>:<br/>  <span class="id" title="keyword">forall</span> <span class="id" title="var">s</span> (<span class="id" title="var">e1</span> <span class="id" title="var">e2</span>:<a class="idref" href="Brenner.ResourceDependency.html#event"><span class="id" title="definition">event</span></a>),<br/>  <a class="idref" href="Brenner.ResourceDependency.html#REdge"><span class="id" title="abbreviation">REdge</span></a> <a class="idref" href="Brenner.ResourceDependency.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="Brenner.ResourceDependency.html#e1"><span class="id" title="variable">e1</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="Brenner.ResourceDependency.html#e2"><span class="id" title="variable">e2</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#df1ced36fc33ce188051218bca314374"><span class="id" title="notation">&lt;-&gt;</span></a><br/>  <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">exists</span></a> <span class="id" title="var">t</span><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a><br/>  <a class="idref" href="Brenner.ResourceDependency.html#ImpededBy"><span class="id" title="definition">ImpededBy</span></a> <a class="idref" href="Brenner.ResourceDependency.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Brenner.ResourceDependency.html#e1"><span class="id" title="variable">e1</span></a> <a class="idref" href="Brenner.ResourceDependency.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">/\</span></a> <a class="idref" href="Brenner.ResourceDependency.html#WaitOn"><span class="id" title="definition">WaitOn</span></a> <a class="idref" href="Brenner.ResourceDependency.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Brenner.ResourceDependency.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Brenner.ResourceDependency.html#e2"><span class="id" title="variable">e2</span></a>.<br/><span class="id" title="keyword">Section</span> <a name="Graphs"><span class="id" title="section">Graphs</span></a>.<br/><span class="id" title="keyword">Variable</span> <a name="Graphs.s"><span class="id" title="variable">s</span></a>:<a class="idref" href="Brenner.Semantics.html#state"><span class="id" title="definition">state</span></a>.<br/></pre>
<p>Since the graph is bipartite, then if we have a cycle in the WFG, then
    there exists a cycle in the SG.</p>
<pre class="code"><span class="id" title="keyword">Theorem</span> <a name="wfg_to_sg"><span class="id" title="lemma">wfg_to_sg</span></a>:<br/>  <span class="id" title="keyword">forall</span> <span class="id" title="var">s</span> <span class="id" title="var">c</span>,<br/>  <a class="idref" href="Brenner.ResourceDependency.html#TCycle"><span class="id" title="abbreviation">TCycle</span></a> <a class="idref" href="Brenner.ResourceDependency.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Brenner.ResourceDependency.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>  <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">exists</span></a> <span class="id" title="var">c'</span><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a> <a class="idref" href="Brenner.ResourceDependency.html#RCycle"><span class="id" title="abbreviation">RCycle</span></a> <a class="idref" href="Brenner.ResourceDependency.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Brenner.ResourceDependency.html#c'"><span class="id" title="variable">c'</span></a>.<br/></pre>
<p>Vice-versa also holds.</p>
<pre class="code"><span class="id" title="keyword">Theorem</span> <a name="sg_to_wfg"><span class="id" title="lemma">sg_to_wfg</span></a>:<br/>  <span class="id" title="keyword">forall</span> <span class="id" title="var">c</span>,<br/>  <a class="idref" href="Brenner.ResourceDependency.html#RCycle"><span class="id" title="abbreviation">RCycle</span></a> <a class="idref" href="Brenner.ResourceDependency.html#Graphs.s"><span class="id" title="variable">s</span></a> <a class="idref" href="Brenner.ResourceDependency.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>  <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">exists</span></a> <span class="id" title="var">c'</span><a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a> <a class="idref" href="Brenner.ResourceDependency.html#TCycle"><span class="id" title="abbreviation">TCycle</span></a> <a class="idref" href="Brenner.ResourceDependency.html#Graphs.s"><span class="id" title="variable">s</span></a> <a class="idref" href="Brenner.ResourceDependency.html#c'"><span class="id" title="variable">c'</span></a>.<br/><span class="id" title="keyword">End</span> <a class="idref" href="Brenner.ResourceDependency.html#Graphs"><span class="id" title="section">Graphs</span></a>.<br/><span class="id" title="keyword">Section</span> <a name="Basic"><span class="id" title="section">Basic</span></a>.<br/>  <span class="id" title="keyword">Variable</span> <a name="Basic.s"><span class="id" title="variable">s</span></a>:<a class="idref" href="Brenner.Semantics.html#state"><span class="id" title="definition">state</span></a>.<br/></pre>
<p>In our language tasks can only await a single phaser, so
    it is easy to see that the <span class="inlinecode"><span class="id" title="var">WaitOn</span></span> predicate is actually a function
    from task ids to events.</p>
<pre class="code"><span class="id" title="keyword">Lemma</span> <a name="wait_on_fun"><span class="id" title="lemma">wait_on_fun</span></a>:<br/>  <span class="id" title="keyword">forall</span> <span class="id" title="var">t</span> <span class="id" title="var">e</span> <span class="id" title="var">e'</span>,<br/>  <a class="idref" href="Brenner.ResourceDependency.html#WaitOn"><span class="id" title="definition">WaitOn</span></a> <a class="idref" href="Brenner.ResourceDependency.html#Basic.s"><span class="id" title="variable">s</span></a> <a class="idref" href="Brenner.ResourceDependency.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Brenner.ResourceDependency.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>  <a class="idref" href="Brenner.ResourceDependency.html#WaitOn"><span class="id" title="definition">WaitOn</span></a> <a class="idref" href="Brenner.ResourceDependency.html#Basic.s"><span class="id" title="variable">s</span></a> <a class="idref" href="Brenner.ResourceDependency.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Brenner.ResourceDependency.html#e'"><span class="id" title="variable">e'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>  <a class="idref" href="Brenner.ResourceDependency.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="Brenner.ResourceDependency.html#e'"><span class="id" title="variable">e'</span></a>.<br/></pre>
<p>We show that any task id in the <span class="inlinecode"><span class="id" title="var">WaitOn</span></span> is in the task map of <span class="inlinecode"><span class="id" title="var">s</span></span> .</p>
<pre class="code"><span class="id" title="keyword">Lemma</span> <a name="wait_on_in_tasks"><span class="id" title="lemma">wait_on_in_tasks</span></a>:<br/>  <span class="id" title="keyword">forall</span> <span class="id" title="var">t</span> <span class="id" title="var">e</span>,<br/>  <a class="idref" href="Brenner.ResourceDependency.html#WaitOn"><span class="id" title="definition">WaitOn</span></a> <a class="idref" href="Brenner.ResourceDependency.html#Basic.s"><span class="id" title="variable">s</span></a> <a class="idref" href="Brenner.ResourceDependency.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Brenner.ResourceDependency.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>  <a class="idref" href="Brenner.Vars.html#Map_TID.In"><span class="id" title="definition">Map_TID.In</span></a> <a class="idref" href="Brenner.ResourceDependency.html#t"><span class="id" title="variable">t</span></a> (<a class="idref" href="Brenner.Semantics.html#get_tasks"><span class="id" title="definition">get_tasks</span></a> <a class="idref" href="Brenner.ResourceDependency.html#Basic.s"><span class="id" title="variable">s</span></a>).<br/><span class="id" title="keyword">Lemma</span> <a name="impeded_by_in_phasermap"><span class="id" title="lemma">impeded_by_in_phasermap</span></a>:<br/>  <span class="id" title="keyword">forall</span> <span class="id" title="var">e</span> <span class="id" title="var">t</span>,<br/>  <a class="idref" href="Brenner.ResourceDependency.html#ImpededBy"><span class="id" title="definition">ImpededBy</span></a> <a class="idref" href="Brenner.ResourceDependency.html#Basic.s"><span class="id" title="variable">s</span></a> <a class="idref" href="Brenner.ResourceDependency.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="Brenner.ResourceDependency.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>  <a class="idref" href="Brenner.Vars.html#Map_PHID.In"><span class="id" title="definition">Map_PHID.In</span></a> (<span class="id" title="var">elt</span>:=<a class="idref" href="Brenner.Phaser.html#phaser"><span class="id" title="definition">Phaser.phaser</span></a>) (<a class="idref" href="Brenner.ResourceDependency.html#get_phaser"><span class="id" title="definition">get_phaser</span></a> <a class="idref" href="Brenner.ResourceDependency.html#e"><span class="id" title="variable">e</span></a>) (<a class="idref" href="Brenner.Semantics.html#get_phasers"><span class="id" title="definition">get_phasers</span></a> <a class="idref" href="Brenner.ResourceDependency.html#Basic.s"><span class="id" title="variable">s</span></a>).<br/><span class="id" title="keyword">End</span> <a class="idref" href="Brenner.ResourceDependency.html#Basic"><span class="id" title="section">Basic</span></a>.<br/></pre>
